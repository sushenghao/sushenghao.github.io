(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?module.exports=e:e(jQuery)})(function(e){function u(t){var n=t||window.event,o=r.call(arguments,1),u=0,f=0,l=0,c=0;t=e.event.fix(n),t.type="mousewheel","detail"in n&&(l=n.detail*-1),"wheelDelta"in n&&(l=n.wheelDelta),"wheelDeltaY"in n&&(l=n.wheelDeltaY),"wheelDeltaX"in n&&(f=n.wheelDeltaX*-1),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(f=l*-1,l=0),u=l===0?f:l,"deltaY"in n&&(l=n.deltaY*-1,u=l),"deltaX"in n&&(f=n.deltaX,l===0&&(u=f*-1));if(l===0&&f===0)return;c=Math.max(Math.abs(l),Math.abs(f));if(!s||c<s)s=c;return u=Math[u>=1?"floor":"ceil"](u/s),f=Math[f>=1?"floor":"ceil"](f/s),l=Math[l>=1?"floor":"ceil"](l/s),t.deltaX=f,t.deltaY=l,t.deltaFactor=s,o.unshift(t,u,f,l),i&&clearTimeout(i),i=setTimeout(a,200),(e.event.dispatch||e.event.handle).apply(this,o)}function a(){s=null}var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice,i,s;if(e.event.fixHooks)for(var o=t.length;o;)e.event.fixHooks[t[--o]]=e.event.mouseHooks;e.event.special.mousewheel={version:"3.1.6",setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],u,!1);else this.onmousewheel=u},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],u,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof module=="object"&&module.exports?e(require("jquery")):e(jQuery)}(function(e){function l(t){var n={},r=/^jQuery\d+$/;return e.each(t.attributes,function(e,t){t.specified&&!r.test(t.name)&&(n[t.name]=t.value)}),n}function c(n,r){var i=this,s=e(this);if(i.value===s.attr(t?"placeholder-x":"placeholder")&&s.hasClass(f.customClass)){i.value="",s.removeClass(f.customClass);if(s.data("placeholder-password")){s=s.hide().nextAll('input[type="password"]:first').show().attr("id",s.removeAttr("id").data("placeholder-id"));if(n===!0)return s[0].value=r,r;s.focus()}else i==p()&&i.select()}}function h(n){var r,i=this,s=e(this),o=i.id;if(n&&n.type==="blur"&&s.hasClass(f.customClass))return;if(i.value===""){if(i.type==="password"){if(!s.data("placeholder-textinput")){try{r=s.clone().prop({type:"text"})}catch(u){r=e("<input>").attr(e.extend(l(this),{type:"text"}))}r.removeAttr("name").data({"placeholder-enabled":!0,"placeholder-password":s,"placeholder-id":o}).bind("focus.placeholder",c),s.data({"placeholder-textinput":r,"placeholder-id":o}).before(r)}i.value="",s=s.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",s.data("placeholder-id")).show()}else{var a=s.data("placeholder-password");a&&(a[0].value="",s.attr("id",s.data("placeholder-id")).show().nextAll('input[type="password"]:last').hide().removeAttr("id"))}s.addClass(f.customClass),s[0].value=s.attr(t?"placeholder-x":"placeholder")}else s.removeClass(f.customClass)}function p(){try{return document.activeElement}catch(e){}}var t=!1,n=Object.prototype.toString.call(window.operamini)==="[object OperaMini]",r="placeholder"in document.createElement("input")&&!n&&!t,i="placeholder"in document.createElement("textarea")&&!n&&!t,s=e.valHooks,o=e.propHooks,u,a,f={};r&&i?(a=e.fn.placeholder=function(){return this},a.input=!0,a.textarea=!0):(a=e.fn.placeholder=function(n){var i={customClass:"placeholder"};return f=e.extend({},i,n),this.filter((r?"textarea":":input")+"["+(t?"placeholder-x":"placeholder")+"]").not("."+f.customClass).not(":radio, :checkbox, [type=hidden]").bind({"focus.placeholder":c,"blur.placeholder":h}).data("placeholder-enabled",!0).trigger("blur.placeholder")},a.input=r,a.textarea=i,u={get:function(t){var n=e(t),r=n.data("placeholder-password");return r?r[0].value:n.data("placeholder-enabled")&&n.hasClass(f.customClass)?"":t.value},set:function(t,n){var r=e(t),i,s;return n!==""&&(i=r.data("placeholder-textinput"),s=r.data("placeholder-password"),i?(c.call(i[0],!0,n)||(t.value=n),i[0].value=n):s&&(c.call(t,!0,n)||(s[0].value=n),t.value=n)),r.data("placeholder-enabled")?(n===""?(t.value=n,t!=p()&&h.call(t)):(r.hasClass(f.customClass)&&c.call(t),t.value=n),r):(t.value=n,r)}},r||(s.input=u,o.value=u),i||(s.textarea=u,o.value=u),e(function(){e(document).delegate("form","submit.placeholder",function(){var t=e("."+f.customClass,this).each(function(){c.call(this,!0,"")});setTimeout(function(){t.each(h)},10)})}),e(window).bind("beforeunload.placeholder",function(){var t=!0;try{document.activeElement.toString()==="javascript:void(0)"&&(t=!1)}catch(n){}t&&e("."+f.customClass).each(function(){this.value=""})}))}),function(e){var t={init:function(t){var n={set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,alwaysShowScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},t=e.extend(!0,n,t);return this.each(function(){var n=e(this);t.set_width&&n.css("width",t.set_width),t.set_height&&n.css("height",t.set_height);if(!e(document).data("mCustomScrollbar-index"))e(document).data("mCustomScrollbar-index","1");else{var r=parseInt(e(document).data("mCustomScrollbar-index"));e(document).data("mCustomScrollbar-index",r+1)}n.wrapInner("<div class='mCustomScrollBox mCS-"+t.theme+"' id='mCSB_"+e(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%;max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+e(document).data("mCustomScrollbar-index"));var i=n.children(".mCustomScrollBox");if(t.horizontalScroll){i.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />");var s=i.children(".mCSB_h_wrapper");s.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:s.children().outerWidth(),position:"relative"}).unwrap()}else i.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var o=i.children(".mCSB_container");e.support.touch&&o.addClass("mCS_touch"),o.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var u=i.children(".mCSB_scrollTools"),a=u.children(".mCSB_draggerContainer"),f=a.children(".mCSB_dragger");t.horizontalScroll?f.data("minDraggerWidth",f.width()):f.data("minDraggerHeight",f.height()),t.scrollButtons.enable&&(t.horizontalScroll?u.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>"):u.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>")),i.bind("scroll",function(){n.is(".mCS_disabled")||i.scrollTop(0).scrollLeft(0)}),n.data({mCS_Init:!0,mCustomScrollbarIndex:e(document).data("mCustomScrollbar-index"),horizontalScroll:t.horizontalScroll,scrollInertia:t.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:t.mouseWheel,mouseWheelPixels:t.mouseWheelPixels,autoDraggerLength:t.autoDraggerLength,autoHideScrollbar:t.autoHideScrollbar,alwaysShowScrollbar:t.alwaysShowScrollbar,snapAmount:t.snapAmount,snapOffset:t.snapOffset,scrollButtons_enable:t.scrollButtons.enable,scrollButtons_scrollType:t.scrollButtons.scrollType,scrollButtons_scrollSpeed:t.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:t.scrollButtons.scrollAmount,autoExpandHorizontalScroll:t.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:t.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:t.advanced.normalizeMouseWheelDelta,contentTouchScroll:t.contentTouchScroll,onScrollStart_Callback:t.callbacks.onScrollStart,onScroll_Callback:t.callbacks.onScroll,onTotalScroll_Callback:t.callbacks.onTotalScroll,onTotalScrollBack_Callback:t.callbacks.onTotalScrollBack,onTotalScroll_Offset:t.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:t.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:t.callbacks.whileScrolling,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1});if(t.horizontalScroll)n.css("max-width")!=="none"&&(t.advanced.updateOnContentResize||(t.advanced.updateOnContentResize=!0));else if(n.css("max-height")!=="none"){var l=!1,c=parseInt(n.css("max-height"));n.css("max-height").indexOf("%")>=0&&(l=c,c=n.parent().height()*l/100),n.css("overflow","hidden"),i.css("max-height",c)}n.mCustomScrollbar("update");if(t.advanced.updateOnBrowserResize){var h,p=e(window).width(),d=e(window).height();e(window).bind("resize."+n.data("mCustomScrollbarIndex"),function(){h&&clearTimeout(h),h=setTimeout(function(){if(!n.is(".mCS_disabled")&&!n.is(".mCS_destroyed")){var t=e(window).width(),r=e(window).height();if(p!==t||d!==r)n.css("max-height")!=="none"&&l&&i.css("max-height",n.parent().height()*l/100),n.mCustomScrollbar("update"),p=t,d=r}},150)})}if(t.advanced.updateOnContentResize){var v;if(t.horizontalScroll)var m=o.outerWidth();else var m=o.outerHeight();v=setInterval(function(){if(t.horizontalScroll){t.advanced.autoExpandHorizontalScroll&&o.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:o.outerWidth(),position:"relative"}).unwrap();var e=o.outerWidth()}else var e=o.outerHeight();e!=m&&(n.mCustomScrollbar("update"),m=e)},300)}})},update:function(){var t=e(this),n=t.children(".mCustomScrollBox"),r=n.children(".mCSB_container");r.removeClass("mCS_no_scrollbar"),t.removeClass("mCS_disabled mCS_destroyed"),n.scrollTop(0).scrollLeft(0);var i=n.children(".mCSB_scrollTools"),s=i.children(".mCSB_draggerContainer"),o=s.children(".mCSB_dragger");if(t.data("horizontalScroll")){var u=i.children(".mCSB_buttonLeft"),a=i.children(".mCSB_buttonRight"),f=n.width();t.data("autoExpandHorizontalScroll")&&r.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:r.outerWidth(),position:"relative"}).unwrap();var l=r.outerWidth()}else var c=i.children(".mCSB_buttonUp"),h=i.children(".mCSB_buttonDown"),p=n.height(),d=r.outerHeight();if(d>p&&!t.data("horizontalScroll")){i.css("display","block");var v=s.height();if(t.data("autoDraggerLength")){var m=Math.round(p/d*v),g=o.data("minDraggerHeight");if(m<=g)o.css({height:g});else if(m>=v-10){var y=v-10;o.css({height:y})}else o.css({height:m});o.children(".mCSB_dragger_bar").css({"line-height":o.height()+"px"})}var b=o.height(),w=(d-p)/(v-b);t.data("scrollAmount",w).mCustomScrollbar("scrolling",n,r,s,o,c,h,u,a);var E=Math.abs(r.position().top);t.mCustomScrollbar("scrollTo",E,{scrollInertia:0,trigger:"internal"})}else if(l>f&&t.data("horizontalScroll")){i.css("display","block");var S=s.width();if(t.data("autoDraggerLength")){var x=Math.round(f/l*S),T=o.data("minDraggerWidth");if(x<=T)o.css({width:T});else if(x>=S-10){var N=S-10;o.css({width:N})}else o.css({width:x})}var C=o.width(),w=(l-f)/(S-C);t.data("scrollAmount",w).mCustomScrollbar("scrolling",n,r,s,o,c,h,u,a);var E=Math.abs(r.position().left);t.mCustomScrollbar("scrollTo",E,{scrollInertia:0,trigger:"internal"})}else n.unbind("mousewheel focusin"),t.data("horizontalScroll")?o.add(r).css("left",0):o.add(r).css("top",0),t.data("alwaysShowScrollbar")?t.data("horizontalScroll")?t.data("horizontalScroll")&&o.css({width:s.width()}):o.css({height:s.height()}):(i.css("display","none"),r.addClass("mCS_no_scrollbar")),t.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1})},scrolling:function(t,r,i,s,o,u,a,f){function m(e,t,n,r){l.data("horizontalScroll")?l.mCustomScrollbar("scrollTo",s.position().left-t+r,{moveDragger:!0,trigger:"internal"}):l.mCustomScrollbar("scrollTo",s.position().top-e+n,{moveDragger:!0,trigger:"internal"})}var l=e(this);if(!l.data("bindEvent_scrollbar_drag")){var c,h,p,d,v;e.support.pointer?(p="pointerdown",d="pointermove",v="pointerup"):e.support.msPointer&&(p="MSPointerDown",d="MSPointerMove",v="MSPointerUp"),e.support.pointer||e.support.msPointer?(s.bind(p,function(t){t.preventDefault(),l.data({on_drag:!0}),s.addClass("mCSB_dragger_onDrag");var n=e(this),r=n.offset(),i=t.originalEvent.pageX-r.left,o=t.originalEvent.pageY-r.top;i<n.width()&&i>0&&o<n.height()&&o>0&&(c=o,h=i)}),e(document).bind(d+"."+l.data("mCustomScrollbarIndex"),function(e){e.preventDefault();if(l.data("on_drag")){var t=s,n=t.offset(),r=e.originalEvent.pageX-n.left,i=e.originalEvent.pageY-n.top;m(c,h,i,r)}}).bind(v+"."+l.data("mCustomScrollbarIndex"),function(e){l.data({on_drag:!1}),s.removeClass("mCSB_dragger_onDrag")})):(s.bind("mousedown touchstart",function(t){t.preventDefault(),t.stopImmediatePropagation();var n=e(this),r=n.offset(),i,o;if(t.type==="touchstart"){var u=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];i=u.pageX-r.left,o=u.pageY-r.top}else l.data({on_drag:!0}),s.addClass("mCSB_dragger_onDrag"),i=t.pageX-r.left,o=t.pageY-r.top;i<n.width()&&i>0&&o<n.height()&&o>0&&(c=o,h=i)}).bind("touchmove",function(t){t.preventDefault(),t.stopImmediatePropagation();var n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],r=e(this),i=r.offset(),s=n.pageX-i.left,o=n.pageY-i.top;m(c,h,o,s)}),e(document).bind("mousemove."+l.data("mCustomScrollbarIndex"),function(e){if(l.data("on_drag")){var t=s,n=t.offset(),r=e.pageX-n.left,i=e.pageY-n.top;m(c,h,i,r)}}).bind("mouseup."+l.data("mCustomScrollbarIndex"),function(e){l.data({on_drag:!1}),s.removeClass("mCSB_dragger_onDrag")})),l.data({bindEvent_scrollbar_drag:!0})}if(e.support.touch&&l.data("contentTouchScroll")&&!l.data("bindEvent_content_touch")){var g,y,b,w,E,S,x;r.bind("touchstart",function(t){t.stopImmediatePropagation(),g=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],y=e(this),b=y.offset(),E=g.pageX-b.left,w=g.pageY-b.top,S=w,x=E}),r.bind("touchmove",function(t){t.preventDefault(),t.stopImmediatePropagation(),g=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],y=e(this).parent(),b=y.offset(),E=g.pageX-b.left,w=g.pageY-b.top,l.data("horizontalScroll")?l.mCustomScrollbar("scrollTo",x-E,{trigger:"internal"}):l.mCustomScrollbar("scrollTo",S-w,{trigger:"internal"})})}l.data("bindEvent_scrollbar_click")||(i.bind("click",function(t){var n=(t.pageY-i.offset().top)*l.data("scrollAmount"),r=e(t.target);l.data("horizontalScroll")&&(n=(t.pageX-i.offset().left)*l.data("scrollAmount")),(r.hasClass("mCSB_draggerContainer")||r.hasClass("mCSB_draggerRail"))&&l.mCustomScrollbar("scrollTo",n,{trigger:"internal",scrollEasing:"draggerRailEase"})}),l.data({bindEvent_scrollbar_click:!0})),l.data("mouseWheel")&&(l.data("bindEvent_mousewheel")||(t.bind("mousewheel",function(e,t){var n,o=l.data("mouseWheelPixels"),u=Math.abs(r.position().top),a=s.position().top,f=i.height()-s.height();l.data("normalizeMouseWheelDelta")&&(t<0?t=-1:t=1),o==="auto"&&(o=100+Math.round(l.data("scrollAmount")/2)),l.data("horizontalScroll")&&(a=s.position().left,f=i.width()-s.width(),u=Math.abs(r.position().left));if(t>0&&a!==0||t<0&&a!==f)e.preventDefault(),e.stopImmediatePropagation();n=u-t*o,l.mCustomScrollbar("scrollTo",n,{trigger:"internal"})}),l.data({bindEvent_mousewheel:!0})));if(l.data("scrollButtons_enable"))if(l.data("scrollButtons_scrollType")==="pixels"){l.data("horizontalScroll")?(f.add(a).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",N,C),l.data({bindEvent_buttonsContinuous_x:!1}),l.data("bindEvent_buttonsPixels_x")||(f.bind("click",function(e){e.preventDefault(),T(Math.abs(r.position().left)+l.data("scrollButtons_scrollAmount"))}),a.bind("click",function(e){e.preventDefault(),T(Math.abs(r.position().left)-l.data("scrollButtons_scrollAmount"))}),l.data({bindEvent_buttonsPixels_x:!0}))):(u.add(o).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",N,C),l.data({bindEvent_buttonsContinuous_y:!1}),l.data("bindEvent_buttonsPixels_y")||(u.bind("click",function(e){e.preventDefault(),T(Math.abs(r.position().top)+l.data("scrollButtons_scrollAmount"))}),o.bind("click",function(e){e.preventDefault(),T(Math.abs(r.position().top)-l.data("scrollButtons_scrollAmount"))}),l.data({bindEvent_buttonsPixels_y:!0})));function T(e){s.data("preventAction")||(s.data("preventAction",!0),l.mCustomScrollbar("scrollTo",e,{trigger:"internal"}))}}else{if(l.data("horizontalScroll")){f.add(a).unbind("click"),l.data({bindEvent_buttonsPixels_x:!1});if(!l.data("bindEvent_buttonsContinuous_x")){f.bind("mousedown touchstart MSPointerDown pointerdown",function(e){e.preventDefault();var t=A();l.data({mCSB_buttonScrollRight:setInterval(function(){l.mCustomScrollbar("scrollTo",Math.abs(r.position().left)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var N=function(e){e.preventDefault(),clearInterval(l.data("mCSB_buttonScrollRight"))};f.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",N),a.bind("mousedown touchstart MSPointerDown pointerdown",function(e){e.preventDefault();var t=A();l.data({mCSB_buttonScrollLeft:setInterval(function(){l.mCustomScrollbar("scrollTo",Math.abs(r.position().left)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var C=function(e){e.preventDefault(),clearInterval(l.data("mCSB_buttonScrollLeft"))};a.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",C),l.data({bindEvent_buttonsContinuous_x:!0})}}else{u.add(o).unbind("click"),l.data({bindEvent_buttonsPixels_y:!1});if(!l.data("bindEvent_buttonsContinuous_y")){u.bind("mousedown touchstart MSPointerDown pointerdown",function(e){e.preventDefault();var t=A();l.data({mCSB_buttonScrollDown:setInterval(function(){l.mCustomScrollbar("scrollTo",Math.abs(r.position().top)+t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var k=function(e){e.preventDefault(),clearInterval(l.data("mCSB_buttonScrollDown"))};u.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",k),o.bind("mousedown touchstart MSPointerDown pointerdown",function(e){e.preventDefault();var t=A();l.data({mCSB_buttonScrollUp:setInterval(function(){l.mCustomScrollbar("scrollTo",Math.abs(r.position().top)-t,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var L=function(e){e.preventDefault(),clearInterval(l.data("mCSB_buttonScrollUp"))};o.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",L),l.data({bindEvent_buttonsContinuous_y:!0})}}function A(){var e=l.data("scrollButtons_scrollSpeed");return l.data("scrollButtons_scrollSpeed")==="auto"&&(e=Math.round((l.data("scrollInertia")+100)/40)),e}}l.data("autoScrollOnFocus")&&(l.data("bindEvent_focusin")||(t.bind("focusin",function(){t.scrollTop(0).scrollLeft(0);var n=e(document.activeElement);if(n.is("input,textarea,select,button,a[tabindex],area,object")){var i=r.position().top,s=n.position().top,o=t.height()-n.outerHeight();l.data("horizontalScroll")&&(i=r.position().left,s=n.position().left,o=t.width()-n.outerWidth()),(i+s<0||i+s>o)&&l.mCustomScrollbar("scrollTo",s,{trigger:"internal"})}}),l.data({bindEvent_focusin:!0}))),l.data("autoHideScrollbar")&&!l.data("alwaysShowScrollbar")&&(l.data("bindEvent_autoHideScrollbar")||(t.bind("mouseenter",function(e){t.addClass("mCS-mouse-over"),n.showScrollbar.call(t.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(e){t.removeClass("mCS-mouse-over"),e.type==="mouseleave"&&n.hideScrollbar.call(t.children(".mCSB_scrollTools"))}),l.data({bindEvent_autoHideScrollbar:!0})))},scrollTo:function(t,r){function b(e){if(i.data("mCustomScrollbarIndex")){this.mcs={top:a.position().top,left:a.position().left,draggerTop:c.position().top,draggerLeft:c.position().left,topPct:Math.round(100*Math.abs(a.position().top)/Math.abs(a.outerHeight()-u.height())),leftPct:Math.round(100*Math.abs(a.position().left)/Math.abs(a.outerWidth()-u.width()))};switch(e){case"onScrollStart":i.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(i,this.mcs);break;case"whileScrolling":i.data("whileScrolling_Callback").call(i,this.mcs);break;case"onScroll":i.data("onScroll_Callback").call(i,this.mcs);break;case"onTotalScrollBack":i.data("onTotalScrollBack_Callback").call(i,this.mcs);break;case"onTotalScroll":i.data("onTotalScroll_Callback").call(i,this.mcs)}}}var i=e(this),s={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:i.data("scrollInertia"),scrollEasing:i.data("scrollEasing")},r=e.extend(s,r),o,u=i.children(".mCustomScrollBox"),a=u.children(".mCSB_container"),f=u.children(".mCSB_scrollTools"),l=f.children(".mCSB_draggerContainer"),c=l.children(".mCSB_dragger"),h=draggerSpeed=r.scrollInertia,p,d,v,m;if(!a.hasClass("mCS_no_scrollbar")){i.data({mCS_trigger:r.trigger}),i.data("mCS_Init")&&(r.callbacks=!1);if(t||t===0){if(typeof t=="number")r.moveDragger?(o=t,i.data("horizontalScroll")?t=c.position().left*i.data("scrollAmount"):t=c.position().top*i.data("scrollAmount"),draggerSpeed=0):o=t/i.data("scrollAmount");else if(typeof t=="string"){var g;t==="top"?g=0:t==="bottom"&&!i.data("horizontalScroll")?g=a.outerHeight()-u.height():t==="left"?g=0:t==="right"&&i.data("horizontalScroll")?g=a.outerWidth()-u.width():t==="first"?g=i.find(".mCSB_container").find(":first"):t==="last"?g=i.find(".mCSB_container").find(":last"):g=i.find(t),g.length===1?(i.data("horizontalScroll")?t=g.position().left:t=g.position().top,o=t/i.data("scrollAmount")):o=t=g}if(i.data("horizontalScroll")){i.data("onTotalScrollBack_Offset")&&(d=-i.data("onTotalScrollBack_Offset")),i.data("onTotalScroll_Offset")&&(m=u.width()-a.outerWidth()+i.data("onTotalScroll_Offset")),o<0?(o=t=0,clearInterval(i.data("mCSB_buttonScrollLeft")),d||(p=!0)):o>=l.width()-c.width()?(o=l.width()-c.width(),t=u.width()-a.outerWidth(),clearInterval(i.data("mCSB_buttonScrollRight")),m||(v=!0)):t=-t;var y=i.data("snapAmount");y&&(t=Math.round(t/y)*y-i.data("snapOffset")),n.mTweenAxis.call(this,c[0],"left",Math.round(o),draggerSpeed,r.scrollEasing),n.mTweenAxis.call(this,a[0],"left",Math.round(t),h,r.scrollEasing,{onStart:function(){r.callbacks&&!i.data("mCS_tweenRunning")&&b("onScrollStart"),i.data("autoHideScrollbar")&&!i.data("alwaysShowScrollbar")&&n.showScrollbar.call(f)},onUpdate:function(){r.callbacks&&b("whileScrolling")},onComplete:function(){r.callbacks&&(b("onScroll"),(p||d&&a.position().left>=d)&&b("onTotalScrollBack"),(v||m&&a.position().left<=m)&&b("onTotalScroll")),c.data("preventAction",!1),i.data("mCS_tweenRunning",!1),i.data("autoHideScrollbar")&&!i.data("alwaysShowScrollbar")&&(u.hasClass("mCS-mouse-over")||n.hideScrollbar.call(f))}})}else{i.data("onTotalScrollBack_Offset")&&(d=-i.data("onTotalScrollBack_Offset")),i.data("onTotalScroll_Offset")&&(m=u.height()-a.outerHeight()+i.data("onTotalScroll_Offset")),o<0?(o=t=0,clearInterval(i.data("mCSB_buttonScrollUp")),d||(p=!0)):o>=l.height()-c.height()?(o=l.height()-c.height(),t=u.height()-a.outerHeight(),clearInterval(i.data("mCSB_buttonScrollDown")),m||(v=!0)):t=-t;var y=i.data("snapAmount");y&&(t=Math.round(t/y)*y-i.data("snapOffset")),n.mTweenAxis.call(this,c[0],"top",Math.round(o),draggerSpeed,r.scrollEasing),n.mTweenAxis.call(this,a[0],"top",Math.round(t),h,r.scrollEasing,{onStart:function(){r.callbacks&&!i.data("mCS_tweenRunning")&&b("onScrollStart"),i.data("autoHideScrollbar")&&!i.data("alwaysShowScrollbar")&&n.showScrollbar.call(f)},onUpdate:function(){r.callbacks&&b("whileScrolling")},onComplete:function(){r.callbacks&&(b("onScroll"),(p||d&&a.position().top>=d)&&b("onTotalScrollBack"),(v||m&&a.position().top<=m)&&b("onTotalScroll")),c.data("preventAction",!1),i.data("mCS_tweenRunning",!1),i.data("autoHideScrollbar")&&!i.data("alwaysShowScrollbar")&&(u.hasClass("mCS-mouse-over")||n.hideScrollbar.call(f))}})}i.data("mCS_Init")&&i.data({mCS_Init:!1})}}},stop:function(){var t=e(this),r=t.children().children(".mCSB_container"),i=t.children().children().children().children(".mCSB_dragger");n.mTweenAxisStop.call(this,r[0]),n.mTweenAxisStop.call(this,i[0])},disable:function(t){var n=e(this),r=n.children(".mCustomScrollBox"),i=r.children(".mCSB_container"),s=r.children(".mCSB_scrollTools"),o=s.children().children(".mCSB_dragger");r.unbind("mousewheel focusin mouseenter mouseleave touchend"),i.unbind("touchstart touchmove"),t&&(n.data("horizontalScroll")?o.add(i).css("left",0):o.add(i).css("top",0)),s.css("display","none"),i.addClass("mCS_no_scrollbar"),n.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var t=e(this);t.removeClass("mCustomScrollbar _mCS_"+t.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove(),e(document).unbind("mousemove."+t.data("mCustomScrollbarIndex")+" mouseup."+t.data("mCustomScrollbarIndex")+" MSPointerMove."+t.data("mCustomScrollbarIndex")+" MSPointerUp."+t.data("mCustomScrollbarIndex")),e(window).unbind("resize."+t.data("mCustomScrollbarIndex"))}},n={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(e,t,n,r,i,s){function v(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()}function m(){c||o.call(),c=v()-f,g(),c>=e._time&&(e._time=c>e._time?c+l-(c-e._time):c+l-1,e._time<c+1&&(e._time=c+1)),e._time<r?e._id=_request(m):a.call()}function g(){r>0?(e.currVal=w(e._time,h,d,r,i),p[t]=Math.round(e.currVal)+"px"):p[t]=n+"px",u.call()}function y(){l=1e3/60,e._time=c+l,_request=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return g(),setTimeout(e,.01)},e._id=_request(m)}function b(){if(e._id==null)return;window.requestAnimationFrame?window.cancelAnimationFrame(e._id):clearTimeout(e._id),e._id=null}function w(e,t,n,r,i){switch(i){case"linear":return n*e/r+t;case"easeOutQuad":return e/=r,-n*e*(e-2)+t;case"easeInOutQuad":e/=r/2;if(e<1)return n/2*e*e+t;return e--,-n/2*(e*(e-2)-1)+t;case"easeOutCubic":return e/=r,e--,n*(e*e*e+1)+t;case"easeOutQuart":return e/=r,e--,-n*(e*e*e*e-1)+t;case"easeOutQuint":return e/=r,e--,n*(e*e*e*e*e+1)+t;case"easeOutCirc":return e/=r,e--,n*Math.sqrt(1-e*e)+t;case"easeOutSine":return n*Math.sin(e/r*(Math.PI/2))+t;case"easeOutExpo":return n*(-Math.pow(2,-10*e/r)+1)+t;case"mcsEaseOut":var s=(e/=r)*e,o=s*e;return t+n*(.499999999999997*o*s+ -2.5*s*s+5.5*o+ -6.5*s+4*e);case"draggerRailEase":e/=r/2;if(e<1)return n/2*e*e*e+t;return e-=2,n/2*(e*e*e+2)+t}}var s=s||{},o=s.onStart||function(){},u=s.onUpdate||function(){},a=s.onComplete||function(){},f=v(),l,c=0,h=e.offsetTop,p=e.style;t==="left"&&(h=e.offsetLeft);var d=n-h;b(),y()},mTweenAxisStop:function(e){if(e._id==null)return;window.requestAnimationFrame?window.cancelAnimationFrame(e._id):clearTimeout(e._id),e._id=null},rafPolyfill:function(){var e=["ms","moz","webkit","o"],t=e.length;while(--t>-1&&!window.requestAnimationFrame)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"]}};n.rafPolyfill.call(),e.support.touch="ontouchstart"in window,e.support.pointer=window.navigator.pointerEnabled,e.support.msPointer=window.navigator.msPointerEnabled,e.fn.mCustomScrollbar=function(n){if(t[n])return t[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return t.init.apply(this,arguments);e.error("Method "+n+" does not exist")}}(jQuery),function(e){e.fn.extend({imgLazyLoad:function(t){var n=e.extend({lazySrcName:"data-src",scrollStep:200},t),r=0,i=e(window),s=function(){var t=e("img["+n.lazySrcName+"]"),s=function(){return e(window).height()+e(window).scrollTop()+1e3};o(t,s());var u=0;i.bind("scroll",function(){var e=Math.abs(i.scrollTop()-u);e>=n.scrollStep&&(o(t,s()),r==1&&(u+=n.scrollStep,r=0))})},o=function(t,s){t=e("img["+n.lazySrcName+"]"),t.each(function(){var t=e(this).attr(n.lazySrcName);if(t){var r=u(e(this)[0]).y;r<=s&&r+e(this).height()>=i.scrollTop()&&e(this).hide().attr("src",t).fadeIn(300).removeAttr(n.lazySrcName)}}),r=1},u=function(t){var n=navigator.userAgent.toLowerCase(),r=n.indexOf("opera")!=-1,i=n.indexOf("msie")!=-1&&!r,s=t;if(s.parentNode===null||s.style.display=="none")return!1;var o=null,u=[],a;if(s.getBoundingClientRect){a=s.getBoundingClientRect();if(n.indexOf("ipad")!=-1)return{x:a.left,y:a.top};var f=e(window).scrollTop(),l=e(window).scrollLeft();return{x:a.left+l,y:a.top+f}}if(document.getBoxObjectFor){a=document.getBoxObjectFor(s);var c=s.style.borderLeftWidth?parseInt(s.style.borderLeftWidth):0,h=s.style.borderTopWidth?parseInt(s.style.borderTopWidth):0;u=[a.x-c,a.y-h]}else{u=[s.offsetLeft,s.offsetTop],o=s.offsetParent;if(o!=s)while(o)u[0]+=o.offsetLeft,u[1]+=o.offsetTop,o=o.offsetParent;if(n.indexOf("opera")!=-1||n.indexOf("safari")!=-1&&s.style.position=="absolute")u[0]-=document.body.offsetLeft,u[1]-=document.body.offsetTop}s.parentNode?o=s.parentNode:o=null;while(o&&o.tagName!="BODY"&&o.tagName!="HTML")u[0]-=o.scrollLeft,u[1]-=o.scrollTop,o.parentNode?o=o.parentNode:o=null;return{x:u[0],y:u[1]}};s()}})}(jQuery),jQuery(function(){$.fn.imgLazyLoad()}),Date.now||(Date.now=function(){return(new Date).getTime()}),function(){"use strict";var e=["webkit","moz"];for(var t=0;t<e.length&&!window.requestAnimationFrame;++t){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var r=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(r+16,t);return setTimeout(function(){e(r=n)},n-t)},window.cancelAnimationFrame=clearTimeout}}(),$.extend($.namespace("Baike.Gallery"),function(){function a(e){$.each(e,function(e){$(this).attr("data-index",e);var t=$(this).attr("href"),n=$(this).find("img"),r=n.attr("title");u.test(r)&&(r="",n.attr({title:r,alt:r}),n.next("span").text(r)),i[e]={src:t,title:r}})}function f(){var e=$('a[data-type="gallery"]').toArray();$("#js-entry-image").attr("class")=="pic"&&e.splice(0,0,e.pop()),a(e)}function l(e){var t;return/qhimg\.com/.test(e)?t=e.replace(/\/dr\/.*\//,"/"):/upimg\.baike\.so\.com/.test(e)&&(t=e.replace(/\?.*&/,"?")),t}function p(){r.on("mousemove",h.picMove),e.delegate(".btn-close","click",c.hide),e.delegate(".pic-pre, .btn-left","click",h.moveLeft),e.delegate(".pic-next, .btn-right","click",h.moveRight),n.delegate(".item","click",h.clickNav),e.click(h.clickShadow),$(document).on("keyup",h.keyup),$("#gallery-more").attr("href","http://image."+Baike.Info.host+"/i?src=360baike_sidepicmore&q="+encodeURIComponent(Baike.Info.ename)),$('a[data-type="gallery"]').click(function(){var e=$(this).attr("data-index");return c.show(e),!1})}function d(o){$('<div id="gallery-box" />').appendTo(document.body),$.getTmpl("/resource/other/template/gallery_template.html?v=1.0").done(function(){e=$("#"+o.boxId),t=$("#"+o.templateId),f(),s=i.length,t.tmpl({data:i}).appendTo(e),n=e.find(".nav"),r=e.find(".pic-obj"),p()})}var e,t,n,r,i=[],s=0,o=-1,u=/(?:www|[\w\+=]+\s*\.\s*)?[\w\+=]+\s*\.\s*[\w\+=\s]+\s*/,c={slide:function(e){var t=n.find(".pic-pre"),r=n.find(".pic-next");if(e!=0||e!=s-1)t.removeClass("end"),r.removeClass("end");e==0&&t.addClass("end"),e==s-1&&r.addClass("end");var i=e*-111;n.find(".nav-inner").stop(!0,!0).animate({"margin-left":i+"px"},500)},show:function(t){if(t<0||t>=s)return;t=Number(t);var u=i[t],a=t+1;r
.attr("title",u.title).attr("src",l(u.src)),e.find(".page-num").html(a),e.find(".page-total").html(s),e.find(".title").text(u.title),$("body").addClass("bodydiv"),n.find('.item[data-index="'+o+'"],.item[data-index="'+t+'"]').removeClass("current"),c.slide(t),o=t,$("html").css({overflow:"hidden"})},hide:function(){$("body").removeClass("bodydiv"),$("html").css({overflow:"auto"})}},h={moveLeft:function(e){e&&e.preventDefault(),c.show(o-1)},moveRight:function(e){e&&e.preventDefault(),c.show(o+1)},clickShadow:function(e){e=$.event.fix(e);var t=$(e.target).hasClass("content")||$(e.target).hasClass("nav");t&&c.hide()},clickNav:function(){var e=$(this).attr("data-index");c.show(e)},picMove:function(e){var t=r.width(),n=e.offsetX;if(!n){var i=e.target,s=i.getBoundingClientRect?i.getBoundingClientRect().left:0;n=e.clientX-s}n<t/2?(r.removeClass("btn-right"),r.addClass("btn-left")):(r.addClass("btn-right"),r.removeClass("btn-left"))},keyup:function(e){var e=$.event.fix(e),t=$("body").hasClass("bodydiv");t&&(e.keyCode==27&&c.hide(),e.keyCode==37&&h.moveLeft(),e.keyCode==39&&h.moveRight())}};return{init:d,show:c.show,hide:c.hide}}()),$(function(){Baike.Gallery.init({boxId:"gallery-box",templateId:"gallery_template"})}),$(function(){function u(e){var t=$.event.fix(e);t.preventDefault();var n=$(t.target),r=Baike.Info.ename,i="\u3010"+Baike.Info.siteName+"\u3011"+$("#js-card-content").text(),s=location.href,o=$("#js-entry-image").attr("src"),u={s_title:encodeURIComponent(r),s_content:encodeURIComponent(i),s_link:encodeURIComponent(s),s_pic:encodeURIComponent(o||"http://p1.qhimg.com/t019dfac5ab95237b1b.png")},a=n.find("i").attr("class"),f="http://service.t.sina.com.cn/share/share.php?appkey=1495952907&title="+u.s_content+"&pic="+u.s_pic+"&url="+u.s_link,l="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+u.s_link+"&title="+u.s_title+"&summary="+u.s_content+"&pics="+u.s_pic,c="http://widget.renren.com/dialog/share?resourceUrl="+u.s_link+"&title="+u.s_title+"&description="+u.s_content+"&images="+u.s_pic,h="http://share.v.t.qq.com/index.php?c=share&a=index&url="+u.s_link+"&title="+u.s_content+"&pic="+u.s_pic,p="http://shuo.douban.com/!service/share?href="+u.s_link+"&name="+u.s_content,d="http://tieba.baidu.com/f/commit/share/openShareApi?url="+u.s_link+"&title="+u.s_title,v={weibo:f,qzone:l,renren:c,tweibo:h,douban:p,tieba:d,url:""};return v.url=a=="weibo"?v.weibo:a=="qzone"?v.qzone:a=="renren"?v.renren:a=="tweibo"?v.tweibo:a=="douban"?v.douban:a=="tieba"?v.tieba:"",window.open(v.url),!1}var e=$("#topCatalog-catalog"),t=$("#sideCatalog-catalog"),n=$("#side-tool-bar"),r=n.find("#shareBox"),i=n.find("#shareBtn"),s=e.height();e.addClass("max_height"),$("#topCatalog .switch").on("click",function(){var t=$(this).find(".ico"),n=$(this).find(".text");t.attr("class").indexOf("show")>=0?(t.removeClass("show").addClass("hide"),n.html("\u5c55\u5f00"),e.hide()):(t.removeClass("hide").addClass("show"),n.html("\u6536\u8d77"),e.show()),o.catalogScroll()}),n.find(".sideCatalog_btn").on("click",function(){$("#sideCatalog").toggle()}),n.find(".scrolltop").on("click",function(){return $("html,body").stop(!0).animate({scrollTop:0},400),!1}),n.find(".greaticon").on("click",function(){var e=Baike.Info.eid,t=Baike.Info.sid,n="up",r=$(this),i=r.find(":first-child");$.ajax({url:"/stat/praise",type:"post",dataType:"json",data:{eid:e,sid:t,praise:n},success:function(e){e.errno=="0"&&i.show().stop(!0).animate({opacity:0,top:"-=25px"},1e3,function(){r.attr("class","zan-greaticon")})}})});var o={catalogObj:{},init:function(){this.catalogObj=$("#lemma-main").find("h2,h3");var e=this;Baike.Timer.delay("sideCatalog",2e3,function(){e.addEvent()}),this.catalogScroll()},catalogScroll:function(){$("#sideCatalog-catalog,#topCatalog-catalog").mCustomScrollbar("destroy"),$("#sideCatalog-catalog").mCustomScrollbar({autoDraggerLength:!1,advanced:{updateOnContentResize:!0,autoExpandHorizontalScroll:!0},theme:"dark"})},addEvent:function(){$(window).on("scroll",function(){var e=$("#js-sidetoolbar-contral").offset().top-($(window).height()-n.height()-300),t=$(window).height()-($("#bnbtm").offset().top-$(this).scrollTop());t>=0?n.css("bottom",t+100):n.css("bottom",270);var r=$(".boxwrap").height(),i=$(".boxinner-r").height(),s=$("#side-tool-bar").height(),u=r-i-(s+58+48);e>0&&$(this).scrollTop()>e&&u>=0?n.css("visibility","visible"):n.css("visibility","hidden"),o.catalogObj.length>0&&o.detectionDot()}),t.find("dl dd a").on("click",function(e){var t=$(this),n=t.attr("href").replace("#",""),r=$("#main-content-text a[name="+n+"], #main a[name="+n+"]");e.preventDefault(),r.length>0&&$("html,body").stop(!0).animate({scrollTop:r.offset().top+"px"},400,function(){try{window.location.hash=t.attr("href")}catch(e){}})})},setSideScroll:function(e){var n=t.find("dl").height(),r=t.height(),i=this.catalogObj.length;if(n>r){var s=(n-r)/i,o=Math.ceil(n/r);e+=1,e<3?t.mCustomScrollbar("scrollTo",0):e>i-3?t.mCustomScrollbar("scrollTo",s*i):t.mCustomScrollbar("scrollTo",s*e)}},detectionDot:function(){var e=$(window).scrollTop(),n=this.catalogObj.eq(this.catalogObj.length-1);if(e+$(window).height()>=$("body").height()){this.setDot(n);return}if(e<=this.catalogObj.eq(0).offset().top-20){t.find("dd").removeClass("higthlight");return}if(e>=n.offset().top-20){this.setDot(n);return}this.catalogObj.each(function(t){if(t==o.catalogObj.length-1)return;e>=$(this).offset().top-20&&e<o.catalogObj.eq(t+1).offset().top&&(o.setDot($(this)),o.setSideScroll(o.catalogObj.index($(this))))})},setDot:function(e){var n=e.find("a[name]").attr("name");t.find("dd").each(function(e){$(this).attr("data-anchor")==n&&($(this).addClass("higthlight").siblings().removeClass("higthlight"),$(this).nextAll().find(".dot").removeClass("green_dot"),$(this).prevAll().find(".dot").addClass("green_dot"))})}};o.init(),r.delegate("a","click",u),Baike.Menu.popup({id:"share-box",nav:i,aPanel:r,delay:200})}),$(function(){function i(){window.tableShow=!0,$(window).trigger("tableFormate")}var e=Baike.Info.eid,t=Baike.Info.sid,n=Baike.Info.ename,r={eid:e,sid:t,ename:n};$.net.get("getCharaData","/Asyncdata/getentryrelation/",{hook:!0}),$.net.connect("getCharaData",r,function(e){if(e.data.length==0)return i(),!1;$.getTmpl("/resource/other/template/entry_character_ship.html").done(function(){var t=[];$.each(e.data,function(e,n){var r=$.parseJSON(n.content);r.title=n.title,t[e]=$("#characterShip").tmpl({data:r}).html()}),$("#characterRelationship").show().append(t.join("")),$("#characterRelationship .tr-title").each(function(e,t){var n=$(t);n.parent().addClass("bt")}),i()})},{2:function(e){i()}})}),$(function(){function n(){var e=$(this).parents("table"),n=e.parents(".table-box"),r=0,i,s;n[0]&&(i=e.find("tr"),s=e.attr("data-anchor"),s&&(r=i[s].offsetTop+i.eq(s).height()+t,n.hasClass("is-cut")&&n.height(r),n.attr("data-height",r)))}function r(){var r=$("#lemma-main").find("table");if(!r.length)return;r.each(function(){var r=$(this),i=r.height(),s=r.find("tr"),o,u=0,a=0;if(i>e){o=$('<div class="table-box is-cut" />');if(s.length>3){a=3;var f=!1;for(;;){if(!(a<s.length))break;u=s[a].offsetTop+s.eq(a).height();if(u>e){f=!0;break}a++}a=f?a-1:Math.floor(s.length/2)}else a=s[1]?1:0;s.length!==1?(u=s[a].offsetTop+s.eq(a).height(),s.each(function(e){e<=a&&$(this).find("img").on("load",n)})):u=e,r.attr("data-anchor",a),u+=t,o.height(u).attr("data-height",u),r.wrap(o),$('<div id="openAllTable" class="openTable cut-table"><span></span>\u5c55\u5f00</div>').insertAfter(r.parent(".table-box"))}}),$("#lemma-main").delegate("#openAllTable","click",function(){var e=$(this),t=e.prev(),n=e.hasClass("cut-table"),r=0,i=n?"\u6536\u8d77":"\u5c55\u5f00";e.html("<span></span>"+i),t.toggleClass("is-cut"),e.toggleClass("cut-table");if(!n){r=t.attr("data-height"),r&&t.height(r);var s=t.offset().top,o=$(window).scrollTop();o>s&&Baike.Tool.scrollTo(s-45)}else t.css("height","auto");monitor.log({cId:"conTable",c:"\u8868\u683c"+i},"click")})}var e=400,t=6;window.tableShow?r():$(window).bind("tableFormate",r)}),function(){function r(){n=new Date}function i(){n&&(e+=new Date-n)}function s(){n&&(e+=new Date-n);try{monitor.setConf("clspageUrl","http://s.360.cn/w360/x.html"),monitor.log({en:t,act:"cp",f:e},"clspage")}catch(r){}}var e=0,t=$INFO.eid+"-"+$INFO.sid,n;window.addEventListener?(window.addEventListener("blur",r),window.addEventListener("focus",i),window.addEventListener("beforeunload",s)):window.attachEvent&&(window.attachEvent("onblur",r),window.attachEvent("onfocus",i),window.attachEvent("onbeforeunload",s))}(),$(function(){var e=document.referrer,t=Baike.Tool.getParamObj(e).q;t=t?t+"-":"",$(Baike.Log).bind("sended",function(e,n,r){n.cId=="sense-list"&&(n.c=t+Baike.Info.ename+"-"+$("#sense-list .hover").text()+"-"+r.text(),monitor.log(n,"click"))})}),$(function(){function t(){var t=e();t.init({btnId:"J-addItemName"})}var e=function(){function o(e){r=$("#"+e.btnId);var t=r.length>0?!0:!1;if(!t)return;r.on("click",$.proxy(this.popWin,this))}function u(){var e=Baike.Info.isLogin,t=Baike.Info.userInfo&&Baike.Info.userInfo.level,n=Baike.Info.userInfo&&Baike.Info.userInfo.is_green_user;return i=r.data("ismultiplesenses"),e?t<4&&!n?this.showTips():this.showPopWin():QHPass.signIn(function(){window.location.reload()}),!1}function a(){var e=Baike.Info.host;this.alert({con:"<p><strong>\u5bf9\u4e0d\u8d77\uff0c\u60a8\u6682\u65f6\u6ca1\u6709\u521b\u5efa\u8bcd\u6761\u4e49\u9879\u7684\u6743\u9650\uff0c360\u767e\u79d1\u8d26\u53f7\u8fbe\u52304\u7ea7\u53ef\u521b\u5efa\u65b0\u4e49\u9879\u3002</strong></p><p>\u53c2\u4e0e<a href='http://baike."+e+"/uc/task' target='_blank'>\u767e\u79d1\u4efb\u52a1</a>\uff0c\u66f4\u5feb\u638c\u63e1\u767e\u79d1\u7f16\u8f91\u6280\u5de7\uff0c\u52a0\u901f\u5347\u7ea7\uff01</p><p>\u5982\u679c\u60a8\u5df2\u8fbe\u5230\u7b49\u7ea7\u4f46\u6ca1\u6709\u6743\u9650\u53ef\u80fd\u662f\u6709\u8fdd\u53cd\u767e\u79d1\u7f16\u8f91\u89c4\u8303\u7684\u60c5\u51b5\u88ab\u5904\u7f5a\uff0c\u7533</p><p>\u8bc9\u53d1\u90ae\u4ef6\u81f3kefu@360.cn\u3002</p>",icon:"warning",skin:"dialogStyle1 itemNamePopup itemNamePopup2"})}function f(e){var t={title:"\u63d0\u793a\u4fe1\u606f",skin:"dialogStyle1 itemNamePopup",padding:"20px 25px 0"};$.extend(t,e||{}),Baike.Dialog.alert(t.con,t.icon,t)}function l(){var t=this,n=Baike.Info.isCommitSname;if(n||i){var r="/create/newSense/?eid="+e;return window.location.href=r,!1}this.alert({icon:"",con:this.popCon,title:"\u6dfb\u52a0\u4e49\u9879",ok:function(){return t.doSubmit(),!1},init:function(){$("#currentNameInput").focus(),$("#currentNameInput,#addNameIput").on("focus",function(){$("#nameRowTips").hide()})},cancel:!0})}function c(){var r=this,i=$.trim($("#addPopCon").find('input[data-type="1"]').val()),s=$.trim($("#addPopCon").find('input[data-type="2"]').val()),o={eid:e,sid:t,ename:n,sname:i,t:$.now()},u=$("#nameRowTips"),a=i.length<=0?"\u5f53\u524d\u4e49\u9879\u540d\u4e0d\u80fd\u4e3a\u7a7a!":i===n?"\u5f53\u524d\u4e49\u9879\u540d\u4e0d\u80fd\u4e0e\u8bcd\u6761\u540d\u76f8\u540c":s===n?"\u65b0\u589e\u4e49\u9879\u540d\u4e0d\u80fd\u4e0e\u8bcd\u6761\u540d\u76f8\u540c":s===i?"\u5f53\u524d\u4e49\u9879\u540d\u65b0\u589e\u4e49\u9879\u540d\u4e5f\u4e0d\u80fd\u76f8\u540c":"";if(a){u.text(a).show();return}s.length>0&&(o.addname=s),$.net.connect("savesinglesense",o,function(e){r.alert({con:e.msg,icon:"",width:350,skin:"dialogStyle1 itemNamePopup itemNamePopup1",ok:function(){var e=encodeURIComponent(o.addname);o.addname?window.location.href="/create/newSense/?eid="+o.eid+"&addname="+e:window.location.href="/create/newSense/?eid="+o.eid}})})}$.net.post("savesinglesense","/create/savesinglesense",{hook:!0});var e=Baike.Info.eid,t=Baike.Info.sid,n=Baike.Info.ename,r={},i=!1,s='<div class="viewrule"><a target="_blank" href="/doc/7923322.html">\u67e5\u770b\u8be6\u7ec6\u89c4\u8303&gt;</a>></div><div id="addPopCon" class="addItemNamePopBox"><p>\u6dfb\u52a0\u4e49\u9879\u4f1a\u5c06\u8bcd\u6761\u53d8\u4e3a<span class="">\u591a\u4e49\u8bcd</span>\uff0c\u9700\u5206\u522b\u4e3a\u5f53\u524d\u4e49\u9879\u548c\u65b0\u589e\u4e49\u9879\u6dfb\u52a0<span class="">\u4e49\u9879\u540d</span>\u4ee5\u4fbf\u533a\u5206\u3002\u4e49\u9879\u540d\u4e00\u822c\u4e3a\u7b80\u77ed\u3001\u4ee3\u8868\u6027\u5f3a\u7684\u77ed\u8bed\u3002</p><div class="exampleBox"><p class="hometxt">\u793a\u4f8b\uff1a</p><p>\u975e\u8bda\u52ff\u6270\uff08\u8bcd\u6761\u540d\uff09</p><p>-\u51af\u5c0f\u521a\u6267\u5bfc\u7535\u5f71\uff08\u4e49\u9879\u540d\uff09</p><p>-\u6c5f\u82cf\u536b\u89c6\u4ea4\u53cb\u8282\u76ee\uff08\u4e49\u9879\u540d\uff09</p></div><div class="namebox"><div class="nameRow"><span class="homet">\u8bcd\u6761\u540d\uff1a</span><span class="currentName">'+n+"</span></div>"+'<div class="nameRow"><span class="homet">\u5f53\u524d\u4e49\u9879\u540d\uff1a</span><span id="nameRowTips" class="tips">\u5f53\u524d\u4e49\u9879\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01</span><div class="inputbox"><input id="currentNameInput" data-type="1" type="text"/></div></div>'+'<div class="nameRow"><span class="homet">\u65b0\u589e\u4e49\u9879\u540d\uff1a</span><div class="inputbox"><input data-type="2" id="addNameIput" type="text"/></div></div>'+'</div></div><div class="popnote"><span>\u6ce8\u610f\uff1a\u586b\u5199\u4e49\u9879\u540d\u540e\uff0c\u5373\u53ef\u8fdb\u884c\u65b0\u589e\u4e49\u9879\u5185\u5bb9\u7f16\u8f91</span></div>';return{init:o,popWin:u,showPopWin:l,showTips:a,alert:f,popCon:s,doSubmit:c}};t();var n=Baike.Tool.getUrlObj();n&&n.sense_list==1&&$("#sense-list .title .switch").trigger("click")}),$(function(){var e={obj:$(".js-edittext .edit, .edit-able"),idObj:null,init:function(){Baike.Info.isCommitSname=!1,$.net.jsonp("statClick",Baike.Info.qUrl+"/stat/click"),$.net.get("checkConf","/create/existsConflictAjax",{hook:!0}),$.net.post("entryEditList","/Asyncdata/entryEditList"),$.net.post("entryStat","/Asyncdata/entryStat"),this.idObjInit(),this.eventHandle(),this.statClick(),this.essence(),this.entryStat()},eventHandle:function(){var e=this;this.obj.click(function(){var t=$(this).attr("href"),n=$(this);return e.validState(t),!1})},validState:function(e){$.net.connect("checkConf",this.idObj,function(t){window.location.href=e},{100001:function(){QHPass.signIn(function(){window.location.reload()})}})},idObjInit:function(){var e=Baike.Info.eid,t=Baike.Info.sid,n=Baike.Info.ename,r={eid:e,sid:t,ename:n};this.idObj=r},statClick:function(){$.net.connect("statClick",this.idObj)},essence:function(){var e=this;Baike.Info.UserInfoDefer.then(function(){$.net.connect("entryEditList",e.idObj,function(e){Baike.Info.isCommitSname=e.data.is_commit_sname,e.data.is_essence&&$(".essence-tag").show()})})},entryStat:function(){Baike.Info.entryStateDefer=$.net.connect("entryStat",this.idObj,function(e){function i(){return r=$(n+"-template"),r.length?$.Deferred().resolve():$.getTmpl("/resource/other/template/entry_stat_template.html").then(function(){r=$(n+"-template")})}var t=e.data,n="#entry-stat",r;$(n).length||(n="#J-mod-stat"),t.eid=$INFO.eid,t.sid=$INFO.sid,t.entry_create_time&&t.contribute_list&&i().done(function(){r.tmpl(t).appendTo(n),$(n).show()})})}};e.init()}),$(function(){var e={init:function(){this.sense_list(),this.hSwitch(),this.catalogHandle()},sense_list:function(){$("#sense-list .title .switch").on("click",function(){var e=$(this).find(".ico"),t=$(this).find(".text");e.attr("class").indexOf("show")>=0?(e.removeClass("show").addClass("hide"),t.html("\u6536\u8d77"),$("#sense-list .content").removeClass("sensehide")):(e.removeClass("hide").addClass("show"),t.html("\u5c55\u5f00"),$("#sense-list .content").addClass("sensehide"))})},hSwitch:function(){function e(){var e=$(this).find(".conArrow"),t=$(this).next(".h3_content");return e.toggleClass("conArrowStat"),t.toggle(),!1}function t(){var e=$(this),t=e.closest("h2");return e.toggleClass("conArrowStat"),t.next(".sonConBox").toggle(),!1}$("#main-content-text").delegate("h2 .conArrow","click",t),$("#main-content-text").delegate("h3","click",e)},textHandle:function(){$("#main-content-text").find(".h2_content p, .h3_content p").each(function(e,t){t=$(t);var n=t.html();/<br\s?\/?>/.test(n)&&(n=n.replace(/<br\s?\/?>/ig,"</p><p>"),t.replaceWith($("<p>"+n+"</p>")))})},catalogHandle:function(){$("#topCatalog-catalog dl dd a").on("click",function(){var e=$("#main-content-text a[name="+$(this).attr("href").replace("#","")+"]");if(e.length>0){var t=e.offset().top-10;Baike.Tool.scrollTo(t)}})}};e.init()}),$(function(){function i(e){function i(){var t="knowledge-show-"+e;Baike.Log.sendShowLog([t])}function s(){t.on("click","a",function(){var t={cId:"knowledge-solved-"+e,c:"knowledge-solved-"+e};monitor.log(t,"click")}),n.on("click","a",function(){var t={cId:"knowledge-unsolved-"+e,c:"knowledge-unsolved-"+e};monitor.log(t,"click")})}var r={abtest_cms:function(){i(),s()},abtest_engine:function(){i(),s()}};r[e]()}var e=$("#knowledge"),t=e.find("#knowledge-solved"),n=e.find("#knowledge-unsolved"),r="http://wenda.so.com/search/getdata4baike";if(!e.length)return!1;$.net.jsonp("getdata4baike",r,"get"),$.net.connect("getdata4baike",{q:Baike.Info.ename,callback:"getdata4baike"}),window.getdata4baike=function(r){var s="",o="",u=function(e){return e=e.replace(/<b>|[.]{3}/g,"").replace(/<\/b>/g,""),e};if(r.resolved.length+r.unresolved.length<5)return!1;for(var a=0,f=r.resolved.length;a<f;a++)s+='<li><a href="http://wenda.so.com/q/'+r.resolved[a].ask_id+'" target="_blank" title=\''+u(r.resolved[a].title)+"'>"+r.resolved[a].title+"</a></li>";for(var a=0,l=r.unresolved.length;a<l;a++)o+='<li class="unsolved"><span class="icon">\u672a\u89e3\u51b3</span><a href="http://wenda.so.com/q/'+r.unresolved[a].ask_id+'?src=baike_ans" target="_blank" title=\''+u(r.unresolved[a].title)+"'>"+r.unresolved[a].title+"</a></li>";t.html(s),n.html(o),e.show(),i(r.source)}}),$(function(){var e=$("#tvplot"),t=$("#tvplot .pagers"),n=t.parent().clone(),r=$(".plot-list dl"),i=!0,s=null;e.append(n),r.length<9?(t.next(".btn").hide(),n.find(".btn").hide()):e.delegate(".page-bar .btn","click",function(e){$(this).toggleClass("dwn").prev().toggleClass("locked")}),e.delegate(".pagers a","click",function(e){var i=$(this),s;s=i.data("index"),s==null&&i.data("index",s=i.index()),t.find("a").eq(s).addClass("active").siblings().removeClass("active"),n.find("a").eq(s).addClass("active").siblings().removeClass("active"),r.eq(s).show().siblings().hide()})}),$(function(){function h(){function i(){if(!r){var t=e.offset().top-n.scrollTop(),s=n.height()-100;if(t>0&&t<s||t<0&&t+e.height()>100){r=!0,n.off("scorll",i);try{var o={cId:"filmbox-show",c:"show"};monitor.log(o,"click")}catch(u){}}}}e.delegate(".mu-year a, .more-menu li, .more-menu a","click",function(e){var n=$(this),r=this.tagName.toLowerCase()==="li"?"active":"mu-y-active";this.tagName.toLowerCase()==="a"&&e.preventDefault();if(this.parentNode&&this.parentNode.tagName.toLowerCase()==="li")return;if(n.hasClass(r))return;u&&u.removeClass(f),n.addClass(r),u=n,f=r;var i=n.data("label"),s,o=".year-v-list-"+i;i&&(s=t.find(o),s.length||(s=$("<li/>"),s.addClass(o.substring(1)).attr("data-status","0"),t.append(s)),s.attr("data-status")==="0"&&b(i,s),s.show().siblings().hide())}).delegate(".mu-more-icon","click",function(){s&&clearTimeout(s);var t=$(this).position().left+106;e.find(".more-menu").css("left",t+"px").show()}).delegate(".mu-more-icon","mouseout",function(){s&&clearTimeout(s),s=setTimeout(function(){e.find(".more-menu").hide()},500)}).delegate(".month a","click",function(e){var t=$(this);e.preventDefault(),t.addClass("active").siblings("a").removeClass("active"),y(t.data("label"),t.closest(".month").next(".v-list"))}).delegate(".trigger-btn","click",function(){var e=$(this),t=e.find("span"),n;t.eq(2).hasClass("s-all-up")?(t.eq(1).hide(),t.eq(0).show(),t.eq(2).removeClass("s-all-up"),e.closest(".v-list-item").removeAttr("style")):(t.eq(1).show(),t.eq(0).hide(),t.eq(2).addClass("s-all-up"),n=e.prev("ul").height(),e.closest(".v-list-item").height(n+32),e.prev("ul").find("img[data-lazy-src]").each(function(){var e=$(this);e.attr("src",e.attr("data-lazy-src")).removeAttr("data-lazy-src")}))}),e.find(".more-menu").hover(function(){s&&clearTimeout(s)},function(){s&&clearTimeout(s),s=setTimeout(function(){e.find(".more-menu").hide()},500)});var n=$(window),r=!1;n.scroll(i),i()}function p(t){function o(e){var t=document.createElement("a");return e=$.trim(e),t.setAttribute("href","###"),t.setAttribute("data-label",e),t.appendChild(document.createTextNode(e)),t}var n=0,r=document.createDocumentFragment(),i,s;t.sort(g);for(;n<4;n++)t[n]&&(i=o(t[n]),n===0&&(i.className="mu-y-active",f="mu-y-active",u=$(i)),r.appendChild(i),t[n+1]&&n<3&&(i=document.createElement("span"),i.innerHTML="|",r.appendChild(i)));t.length>4&&(i=document.createElement("span"),i.className="btn mu-more-icon",r.appendChild(i)),e.find(".mu-year").append(r);for(n=4;t[n];n++)n===4&&(r=document.createDocumentFragment()),i=document.createElement("li"),i.setAttribute("data-label",$.trim(t[n])),i.appendChild(o(t[n])),r.appendChild(i);e.find(".more-menu").append(r)}function v(e,t){function c(e){return e.length<2?"0"+e:e}var n=e.data.json_data||{},r,i,s,o,u,a=[],f={};f.year=$.trim(e.data.tab_label),f.list=a,f.months=t?e.sub_tab_label:e.data.sub_tab_label,f._first=t,s=m(n),f.months&&f.months.sort(g);for(var h=0;h<s.length;h++){r=n[s[h]];if(r){o=m(r);for(var p=0;p<o.length;p++)i=r[o[p]],!l&&i.title_link&&(l=i.title_link,l&&$("#hunantv-ref").attr("href",l)),i.title&&~(u=i.title.indexOf("\uff1a"))&&(i.title=i.title.substring(u+1)||i.title),i.title=i.title||"",i.title.length>19&&!d()?i._title=i.title.substring(0,19)+"...":i._title=i.title,i.period=c($.trim(s[h]))+"-"+c($.trim(o[p]))+"\u671f",i._tag=f.year+"-"+$.trim(s[h]),a.push(i)}}return $("#filmbox-tmplate").tmpl(f)}function m(e){if(Object.keys)return Object.keys(e).reverse();var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort(g)}function g(e,t){return e|=0,t|=0,e>t?-1:e<t?1:0}function y(e,t){var n="v-list-"+e,r=t.find("."+n),i,s,o,u;r.length||(r=$("<div/>"),i=$("<ul/>"),s=t.find(".v-list-all"),u=s.find(".v-item-"+e).clone(),r.append(i).addClass("v-list-item anim "+n),i.append(u),u.length>a&&(o=s.find(".trigger-btn").clone(),r.append(o),o.find(".all-v-text i").text(u.length)),u.each(function(e,t){var n=$(this).find("img");e<8&&n.attr("data-lazy-src")&&n.attr("src",n.attr("data-lazy-src")).removeAttr("data-lazy-src")}),t.append(r)),r.show().siblings(".v-list-item").hide()}function b(e,t){c[e]||(c[e]=1,$.net.connect("getFilmVideoList",{eid:n,sid:r,tid:i,tab_label:e},function(n){n.data&&n.data.tid==i&&n.data.tab_label==e&&t.append(v(n)).attr("data-status","1")}).always(function(){c[e]=0}))}function w(n){n=n.data&&n.data[i],n&&(p(n.tab_label),t.append(v(n,!0)),h(),e.show())}var e=$("#filmbox"),t=$("#film-video-list"),n=$INFO.eid,r=$INFO.sid,i=27,s,o,u,a=8,f,l,c={};$.net.post("getFilmVideoList","http://q.baike.so.com/Asyncdata/asyncPersonalDisplay",{jsonp:!0});var d=function(){var e=document.createElement("div"),t,n;if("getComputedStyle"in window){t=window.getComputedStyle(e);for(n in t)if(n==="webkitLineClamp")return d=function(){return!0},!0}return d=function(){return!1},!1};$.net.connect("getFilmVideoList",{eid:n,sid:r,tid:i},w)}),$(function(){var e=$("#J-ext-mod-nlpmodule-2");e.length&&($.net.post("getNlpMsg","http://q.baike.so.com/asyncdata/fetchEntryNlp",{jsonp:!0}),$.net.connect("getNlpMsg",{eid:$INFO.eid,sid:$INFO.sid},function(t){t=t.data&&t.data.data&&t.data.data[0],t&&t.list&&t.list.length>=2&&(t.list.length>9&&(t.list.length=9),e.append($("#J-ext-mod-nlpmodule-2-tmpl").tmpl(t)).show())}))}),function(){function e(e){var t=["#c6f06c","#9bde16","#5acc18","#4ba517","#ffc60a","#ffa50a","#ff7c0a","#80c8ff","#44a8f6","#1882d4"].reverse(),n=e.realtime.collection.list,r=Math.min(n.length,10),i=[],s=[],o,u=[];n.length=r;for(var a=0;a<r;a++)n[a].$index=a,i.push(n[a].filmname),o=n[a].todaycount+"",/\d$/.test(o)?o=n[a].todaycount/1e4:o=n[a].todaycount.slice(0,-1),s.push({value:o,name:n[a].filmname,itemStyle:{normal:{color:t[a]}},$data:n[a]}),u.push({value:n[a].saleratio.slice(0,-1),name:n[a].filmname,itemStyle:{normal:{color:t[a]}},$data:n[a]});return{realtimeList:s.reverse(),ratioList:u.reverse(),yLabelList:i.reverse(),specific:e.specific,comingsoon:e.comingsoon,realtime:e.realtime}}function t(e,t,n){var r=e[0][3].$data,i="";return r&&(i=$("<div/>").append($.tmpl(o,r)[0]).html()),i}function n(e){var t={cId:"box-office",c:e||"box-office"};try{monitor.log(t,"click")}catch(n){}}function r(){if(this._tDom){var e="",t=this._tDom.offsetHeight,n=this._tDom.offsetWidth,r=this._curTicket.indexOf("pie")===0;this._tDom.offsetLeft+n>this._zrWidth&&(r?e+="left:"+(s.x-n-10)+"px;":e+="left:"+(this._zrWidth-n-10)+"px;"),this._tDom.offsetTop+t>this._zrHeight&&(this._curTicket.indexOf("axis")===0?this._tDom.offsetTop-t>20?e+="top:"+(this._tDom.offsetTop-t-20)+"px;":e+="top:"+(this._zrHeight-t-10)+"px;":e+="top:"+(this._zrHeight-t-10)+"px;"),r&&(e+="top:"+(this._tDom.offsetTop-16)+"px;"),e!==""&&(this._tDom.style.cssText+=e)}}var i=$("#filmrank-tmplate-2"),s={x:0,y:0};if(i[0]){var o=i.html(),u,a=e($.parseJSON($("#filmrank-json-data").val())),f={grid:{x:120,x2:25,y:18,y2:28,borderWidth:0},color:["#c6f06c","#9bde16","#5acc18","#4ba517","#ffc60a","#ffa50a","#ff7c0a","#80c8ff","#44a8f6","#1882d4"],tooltip:{trigger:"axis",showDelay:200,axisPointer:{type:"shadow",shadowStyle:{color:"rgba(150,150,150,0.2)",width:20,type:"default"}},position:function(e){return e[0]>240&&e[0]<340&&(e[0]=340),e},backgroundColor:"#fff",borderColor:"#dadada",borderWidth:1,borderRadius:2,padding:[10,12,10,12],enterable:!0,formatter:t,_show:function(e,t,n,i){var o=this._tDom.offsetHeight,a=this._tDom.offsetWidth,f=this,l=(this._curTicket||"").indexOf("pie")===0,c;e&&(typeof e=="function"&&(e=e([t,n])),e instanceof Array&&(t=e[0],n=e[1]));if(l){if(o===0||a===0)c=this._tDom.style.left,this._tDom.style.display="block",o=this._tDom.offsetHeight,a=this._tDom.offsetWidth,this._tDom.style.display="none",this._tDom.style.left=c;t=s.x-a-6,n=s.y-o-6}else t+a>this._zrWidth&&(t-=a+40),n+o>this._zrHeight&&(n-o>0?n-=o+20:n-=o-20),n<20&&(n=0);if(o<10||a<10)u=setTimeout(function(){r.call(f)},20);this._tDom.style.cssText=this._gCssText+this._defaultCssText+(i?i:"")+"left:"+t+"px;top:"+n+"px;"}},toolbox:{show:!1},xAxis:[{type:"value",boundaryGap:[0,.01],splitNumber:5,axisLine:{show:!0,onZero:!1,lineStyle:{color:"#999999",width:1}},splitLine:{show:!1},axisTick:{show:!0,inside:!0,onGap:!0,length:4,lineStyle:{color:"#999999",width:"1"}},axisLabel:{textStyle:{fontFamily:"\u5fae\u8f6f\u96c5\u9ed1",fontSize:"12",color:"#666666",fontWeight:"normal"},margin:6}}],yAxis:[{type:"category",axisLabel:{show:!1},splitLine:{show:!1},interval:"auto",axisLine:{show:!1},axisTick:{show:!1},data:a.yLabelList}],series:[{name:"",type:"bar",data:a.realtimeList,barMinHeight:20,barWidth:20},{name:"pie",type:"pie",radius:[45,60],tooltip:{trigger:"item",backgroundColor:"#fff",borderColor:"#dadada",borderWidth:1,borderRadius:2,padding:4,showDelay:200,enterable:!1,formatter:function(e,t,n){var r='<div data-url="${baike_url}" class="paipian-ratio">${filmname}&nbsp;&nbsp;${todaycount}(${saleratio})</div>';return $("<div/>").append($.tmpl(r,e[5].$data)[0]).html()}},center:["84%","60%"],itemStyle:{normal:{label:{show:!1},labelLine:{length:-160,show:!1}}},data:a.ratioList}]},l=$("#filmrank-tmplate");l.tmpl(a).appendTo(l.closest("div"));var c=echarts.init(document.getElementById("film-rank-box")),h=zrender.require("zrender/shape/Text"),p=c.getZrender(),d=new h({style:{x:p.getWidth()-130,y:p.getHeight()-70,color:"#333",text:"\u7968\u623f\u5360\u6bd4\u7edf\u8ba1",textFont:"bold 14px \u5fae\u8f6f\u96c5\u9ed1",textAlign:"left"},hoverable:!1});c.setOption(f),p.addShape(d);var v=zrender.require("echarts/config");c.on(v.EVENT.HOVER,function(e){e&&e.event&&(s.x=e.event.offsetX,s.y=e.event.offsetY)}),c.on(v.EVENT.CLICK,function(e){var t;(t=e.name&&e.data&&e.data.$data)&&t.baike_url&&(n("barOrPie"),window.open(t.baike_url))}),$("#film-comming").on("click","tr",function(){var e=$(this).data("url");e&&(n("comming"),window.open(e))}),$(document).on("click",".paipian-ratio",function(){var e=$(this).data("url");e&&(n("pie-tips"),window.open(e))}),$.browser.msie&&$.browser.version==7&&$("#film-rank-box").css({filter:"alpha(opacity=100)",backgroundColor:"#fff"})}}(),function(e){function i(e){try{return Array.prototype.slice.call(e,0)}catch(t){var n=new Array(e.length);for(var r=0,i=n.length;r<i;r++)n[r]=e[r];return n}}function s(e,t){var r;if(e&&e.nodeType===1){r=(" "+e.className+" ").replace(n," ");if(~r.indexOf(" "+t+" "))return!0}return!1}function o(e){var n;return e&&(n=e.previousSibling)&&s(n,t.WORDS_WRAP_CLASSNAME)?n:null}function u(e,n){var u=e.childNodes,l,c,h,p,d,v,m,g,y,b,w;u=i(u);for(var E=0;E<u.length;E++){c=u[E];if(c.nodeType===3){p=c.textContent||c.nodeValue,m=p.length,v=-1,l=document.createDocumentFragment(),b=!1,w=o(c),n.lastIndex=0;while(h=n.exec(p))v===-1&&(v=0),d=p.slice(v,h.index),w||(w=f(),l.appendChild(w),b=!0),w.appendChild(document.createTextNode(d)),w=f(t.SPLITE_WRAP_CLASSNAME),l.appendChild(w),b=!0,w.appendChild(document.createTextNode(h[0])),w=null,v=h.index+1;v<m&&(v===-1&&(v=0),d=p.slice(v),w||(w=f(),l.appendChild(w),b=!0),w.appendChild(document.createTextNode(d))),b?e.replaceChild(l,c):e.removeChild(c),l=null}else if(c.nodeType===1){b=!1;if(c.tagName.toLowerCase()==="a")w=o(c),w||(w=f(),e.insertBefore(w,c)),w.appendChild(c);else if(!r[c.tagName.toLowerCase()]){a(c,n);while(c&&c!==u[E+1])y=c.nextSibling,s(c,t.SPLITE_WRAP_CLASSNAME)||(c.nodeType===1&&!r[c.tagName.toLowerCase()]&&(a(c,n),y=c.nextSibling),r[c.tagName.toLowerCase()]||(w=o(c),s(c,t.SPLITE_WRAP_CLASSNAME)||(w||(w=f(),e.insertBefore(w,c)),w.appendChild(c)))),c=y}}}}function a(e,n,s){var o=e.childNodes,u,f,l,c,h,p,d,v,m;o=i(o);for(var g=0;g<o.length;g++){m=o[g];if(m.nodeType===1)r[m.tagName.toLowerCase()]||a(m,n,s||e.parentNode);else if(m.nodeType===3){u=m.textContent||m.nodeValue,l=0,n.lastIndex=0;if(c=n.exec(u)){v=document.createElement(e.tagName),v.appendChild(document.createTextNode(c[0])),e.parentNode.insertBefore(v,e.nextSibling),v.className=t.SPLITE_WRAP_CLASSNAME,f=u.slice(c.index+1),f&&(v=document.createElement(e.tagName),v.appendChild(document.createTextNode(f)),e.parentNode.insertBefore(v,e.nextSibling.nextSibling)),"textContent"in m?m.textContent=u.slice(l,c.index):m.nodeValue=u.slice(l,c.index);if(s){h=e,d=h.parentNode&&h.parentNode.nextSibling;while(h&&h.parentNode&&h.parentNode!==s){p=h;while(p.nextSibling)v=document.createElement(h.parentNode.tagName),p.nextSibling.nodeType===1&&~p.nextSibling.className.indexOf(t.SPLITE_WRAP_CLASSNAME)&&(p.nextSibling.className="",v.className=t.SPLITE_WRAP_CLASSNAME),v.appendChild(p.nextSibling),h.parentNode.parentNode.insertBefore(v,d);h=h.parentNode}}}}}}function f(e){var n=document.createElement("span");return n.className=e||t.WORDS_WRAP_CLASSNAME,n}var t={WORDS_WRAP_CLASSNAME:"words-outer-wrap",SPLITE_WRAP_CLASSNAME:"split-word"},n=/[\t\r\n\f]/g,r={a:1,table:1,ul:1,br:1};t.wrapNode=u,e.Splitter=t}(window),$.extend($.namespace("Baike.WordSpliter"),function(){function e(){function i(e){try{monitor.log(e,"click")}catch(t){}}function s(){var e="#feimu-bg-cover",t=$(e);return t[0]||(t=$("<div/>").addClass("top-box-anim").attr("id","feimu-bg-cover").css({display:"none",position:"fixed",left:0,top:0,width:"100%",height:"100%",opacity:"0",background:"#000","z-index":2}).appendTo($("body")),t.click(function(e){var n=e.target;n===t[0]&&$(".mod-btn-trigger").trigger("click")}),r.on("afterHide",function(){t.trigger("hideBgCover")}),t.on("showBgCover",function(e){var n=e.target;if(n===t[0]){t.show();var r=t.data("tid");r&&clearTimeout(r),r=setTimeout(function(){t.css({opacity:"0.7"})},300),t.data("tid","tid")}}).on("hideBgCover",function(e){var n=e.target;if(n===t[0]){var r=t.data("tid");r&&clearTimeout(r),t.css({opacity:"0"}),r=setTimeout(function(){t.hide()},300),t.data("tid",r)}})),t}function o(e){return e=e.clone(),e.find("table").remove(),e.find("a").each(function(){$.trim(this.className)&&$(this).remove()}),e}var e=/[\uff0c\u3002\uff01\uff1b\uff1f\u2026,\!;\?]/g,t,n=$(".mod-btn-correction"),r=$("#mod-top-box");if(!r[0]||$.browser.msie&&$.browser.version==7)return;$(".h2_content>p, .h3_content>p").each(function(){Splitter.wrapNode(this,e)}),$("#mod-top-box").data("status","completed"),$(document).on("click",".words-outer-wrap",function(e){var t=e.target,n=$(t).closest(".words-wrap-outer-cover"),r,u=!1,a=$(this),f,l,c;if("getSelection"in window)try{f=window.getSelection(),l=f.toString();if(l.length)return}catch(h){}else if("selection"in document){f=document.selection,c=f.createRange(),l=c.text||"";if(l.length)return}if($(t).hasClass("reference_sup"))return;var p=a.clone();l=$.trim(o(p).text());if(!l)return;n[0]?(r=$(".mod-btn-trigger"),u=!0,r.hasClass("mod-btn-state-on")||r.trigger("click"
),s().trigger("showBgCover"),i({cid:"feimu-wordwrap-trig",c:"feimu-wordwrap-trig"})):i({cid:"feimu-wordwrap",c:"feimu-wordwrap"}),$("#mod-top-box").trigger("setCurItem",[a,!0,!1,u])}).on("mouseenter",".words-outer-wrap",function(){var e=$(this),r=e.clone(),i,s,u,a;a=$.trim(o(r).text());if(!a)return;i=e.find(".words-wrap-outer-cover"),t&&t.removeClass("words-wrap-hover"),n.hasClass("mod-top-btn-focus")?t=null:(t=e,e.addClass("words-wrap-hover")),i.length||(u=$("<strong/>").addClass("words-wrap-outer-cover"),s=$("<em/>").addClass("words-wrap-cover"),e.append(u.append(s)))}).on("mouseleave",".words-outer-wrap",function(){$(this).removeClass("words-wrap-hover")})}return{split:e}}()),function(e){function n(e){var t;try{t=e.getNative().createRange()}catch(n){return null}var r=t.item?t.item(0):t.parentElement();return(r.ownerDocument||r)===e.document?t:null}function r(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow}var t=$.browser.msie&&$.browser.version<10,i=function(e){this.document=e,e=null};i.prototype={getIERange:function(){var e=n(this);return!e&&this._bakIERange?this._bakIERange:e},getNative:function(){var e=this.document;try{return e?t?e.selection:r(e).getSelection():null}catch(n){return null}},getRange:function(){return t?n(this):this.getNative().getRangeAt(0)},getText:function(){var e,n;if(e=this.getNative())try{return n=t?e.createRange():e.getRangeAt(0),t?n.text:n.toString()}catch(r){}return""},getRangeText:function(e){var n="";try{n=t?e.text:e.toString()}catch(r){}return n}},e.Selection=i}(window),function(e){function i(e,t,n){function r(){var e=this.DOM.dialog,t=e.find(".sence-list-item-focus"),r=t.data("sid");if(r){var i={href:"#","data-sid":t.data("sid"),"data-sname":t.data("sname"),"data-eid":t.data("eid")};return o(n,i),!0}return!1}return Baike.Dialog.alert(e,"",{title:t,padding:0,cancel:!0,ok:r})}function s(e){var t=new RegExp(/(^\s+)|(\s+$)/g);if(t.test(e))return Baike.Dialog.alert("\u9009\u62e9\u7684\u5185\u5bb9\u4e0d\u8981\u5305\u542b\u7a7a\u683c"),!1;var n=Baike.Info.ename;return e==n?(Baike.Dialog.alert("\u4e0d\u5141\u8bb8\u8bbe\u7f6e\u5f53\u524d\u8bcd\u6761\u540d\u4e3a\u5185\u94fe"),!1):e.length>50?(Baike.Dialog.alert("\u5185\u94fe\u6587\u5b57\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"),!1):!0}function o(e,t){var n=document.createElement("a");n.setAttribute("href","#"),t&&(n.setAttribute("data-sid",t["data-sid"]),n.setAttribute("data-sname",t["data-sname"]),n.setAttribute("data-eid",t["data-eid"])),$.browser.msie&&$.browser.version<10?(n.innerHTML=e.htmlText,e.pasteHTML(n.outerHTML)):(n.appendChild(e.extractContents()),e.insertNode(n),e.collapse(!1),e.detach()),e=null}function u(e,n){var r=Baike.Info.ename;$.net.connect("innerlink",{ename:encodeURIComponent(n),title:encodeURIComponent(r)},function(r){r=r.data,r.sense.length===0?o(e):r.sense.length>1&&(console.log(r),i($("<div/>").append($("#muti-sence-list-tmplate").tmpl(r)).html(),n+"\u662f\u4e2a\u591a\u4e49\u8bcd,\u8bf7\u5728\u4ee5\u4e0b\u5217\u8868\u9009\u62e9\u5185\u94fe\u4f4d\u7f6e",e)),$(t).trigger("stateChange")})}function a(e,t){var n=e.parentElement(),r=[],i=!1,s=n.children||[],o,u=e.duplicate(),a=0,f=s.length-1;while(a<=f){o=s[a],u.moveToElementText(o);var l=u.compareEndPoints("StartToEnd",e),c=u.compareEndPoints("EndToEnd",e),h=u.compareEndPoints("EndToStart",e);if(l===-1&&c===1||h===1&&l===-1)t?o.nodeName===t&&(r.push(o),!i&&(i=!0)):r.push(o);else if(i)break;a++}return r}function f(e){return e?e.replace(/\r\n/g,"\r"):""}function l(e,r){e._text=r;if(n){var i=e.parentElement();if(i)if(i.nodeName==="A"){var s=i.parentElement,o=document.createTextNode(f(i.innerText));s&&s.replaceChild(o,i)}else if(""===r)Baike.Dialog.alert("\u8bf7\u5148\u9009\u62e9\u9700\u8981\u6dfb\u52a0\u5185\u94fe\u7684\u6587\u5b57");else if(i.hasChildNodes()){var l=a(e,"A");if(l.length){var r;for(var h=0;h<l.length;h++)r=l[h].innerText,i.replaceChild(document.createTextNode(f(r)),l[h])}else u(e,r)}else u(e,r)}else{var p=e.startContainer,d=e.endContainer,v=!1;if(p===d)v=c(p);else{v=c(p),v=c(d)||v;if(!v){var m=p,g=1,y=[];while((m=m.nextSibling)&&m!==d)m.tagName==="A"&&y.push(m);if(y.length){for(var h=0;h<y.length;h++){var b=y[h].parentNode,r=document.createTextNode($(y[h]).text());b.replaceChild(r,y[h])}v=!0}}}v||(r===""?Baike.Dialog.alert("\u8bf7\u5148\u9009\u62e9\u9700\u8981\u6dfb\u52a0\u5185\u94fe\u7684\u6587\u5b57"):u(e,r)),$(t).trigger("stateChange")}}function c(e){var t={STRONG:-1,EM:-1},n=e&&e.parentNode;while(n&&t[n.nodeName])n=n.parentNode;if(n&&n.tagName==="A"){var r=n.parentNode,i=document.createTextNode($(n).text());return r.replaceChild(i,n),!0}return!1}function h(e){return e._range?e.getRangeText(e._range):e.getText()}function d(e){var n=e.startContainer,r,i;if(n.nodeType===3&&e.startOffset===n.length)n.nextSibling&&e.setStart(n.nextSibling,0);else if(n===t&&e.startContainer===e.endContainer&&e.endOffset===n.childNodes.length){i=n.firstChild;while(i&&i.innerText==="")i.parentNode.removeChild(i),i=n.firstChild;e.setStart(n.firstChild,0),r=n.lastChild,r&&(r.nodeType===3?e.setEnd(r,r.length):r.nodeType===1&&e.setEnd(r,r.childNodes.length))}return e.startContainer}function v(e,t){var n=e;while(n){if(n.nodeType===1||n===t)return n;n=n.parentNode}}function m(e,t,n){var r=e.getElementsByTagName(t.toUpperCase()),i=null;while(r.length)r[0].innerText||r[0].textContent?(i=document.createElement(n.toLowerCase()),i.innerHTML=r[0].innerHTML,r[0].parentNode.replaceChild(i,r[0])):r[0].parenNode.removeChild(r[0]);return i}function g(e,t){e.execCommand(t)}function y(e,n,r,i){var s=document.createElement("div"),o=0;s.appendChild(e.cloneContents());if(s.hasChildNodes&&s.childNodes[0].nodeName==="A"&&!s.childNodes[0].innerHTML){o=1;if(!s.childNodes[o])return}if(s.childNodes[o].nodeName===n){document.execCommand(r),s=document.createElement("div"),selection=window.getSelection();try{e=selection.getRangeAt(0),s.appendChild(e.cloneContents()),s.getElementsByTagName("B")[0]&&document.execCommand(r)}catch(u){console.error(u)}focusNode=i&&i(t)}else document.execCommand(r),focusNode=i&&i(t);selection=window.getSelection(),focusNode&&selection.selectAllChildren(focusNode)}var t,n=$.browser.msie&&$.browser.version<10,r=$.browser.msie&&$.browser.version==9;$.net.get("innerlink","/Asyncdata/innerlink",{hook:!0}),$(document).on("click",".muti-sence-list>li",function(e){$(this).addClass("sence-list-item-focus").siblings().removeClass("sence-list-item-focus")});var p=function(){t=$(window).data("editor-item");if(!t)return!1;var e=$(t).data("selection");if(!e){Baike.Dialog.alert("\u8bf7\u5148\u9009\u62e9\u8f93\u5165\u6846");return}var n="";n=h(e);if(!s(n))return!1;l(e._range?e._range:e.getRange(),n)},b=function(){t=$(window).data("editor-item");var e=$(t).data("selection"),r,i=[],s=e._range?e._range:e.getRange(),o;e&&(r=h(e),$.trim(r)&&(n?g(s,"Bold"):y(s,"STRONG","Bold",function(e){return m(e,"B","STRONG")})),$(t).trigger("stateChange"))},w=function(){t=$(window).data("editor-item");var e=$(t).data("selection"),r,i=[],s=e._range?e._range:e.getRange(),o;e&&(r=h(e),$.trim(r)&&(n?g(s,"Italic"):y(s,"EM","Italic",function(e){return m(e,"I","EM")}))),$(t).trigger("stateChange")};e.hyperLink=p,e.textBold=b,e.textItalic=w}(window),function(e,t){function o(e){var t=e.data("selection"),n;return t&&(n=t._range||t.getRange()),n}function u(){var e=$("#"+n);return e[0]?e.val(""):(e=$('<input type="text"/>'),e.attr("id",n).css({position:"fixed",width:"1px",height:"1px",overflow:"hidden",left:"0",top:"0",border:"0",outline:"none"}),$(document.body).append(e)),e}function a(e){var n=u();return n.focus(),r&&t.execCommand("Paste",!1,null),n}function f(e){var u=$(this),f=u.data("selection"),l=o(u),c="",h=null,p=null,d=null,v=null;r||!s?(h=a(u),i?(c=h.val(),l.pasteHTML(c)):setTimeout(function(){c=h.val(),c.charAt(0)=="~"&&(c=c.slice(1)),d=t.createTextNode(c),l.deleteContents(),l.insertNode(d),f=f.getNative(),f.collapse(d,d.length),f.collapseToStart(),u.focus()},10),r&&e.preventDefault()):(d=t.createElement("p"),v=t.createElement("span"),v.textContent=" ",d.id=n,d.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:0",d.appendChild(v),l.deleteContents(),l.insertNode(d),l.selectNode(v),setTimeout(function(){c=d.textContent,p=t.createTextNode(c),d.parentNode.replaceChild(p,d),f=f.getNative(),f.collapse(p,p.length),f.extend(p,p.length)},10))}var n="tmp-for-paste",r=$.browser.msie||$.browser.version==11,i=r&&$.browser.version<10,s=$.browser.mozilla;e.pasteFilterHandler=f}(window,document),$(function(){function n(e){return e=e.clone(),e.find("table").remove(),e.find("a").each(function(){$.trim(this.className)&&$(this).remove()}),e}function r(){var e=$(".mod-inner-edit-box");if(e[0]&&"getSelection"in window){var t=window.getSelection();t.selectAllChildren(e[0]),t.collapseToEnd(),e[0].focus()}}function i(){function o(e){var n=$("<p/>"),r,i;return n.addClass("mod-inner-edit-box"),n[0].contentEditable=!0,e=e.clone(),r=e.find("a.show_img").remove(),i=e.find("a.reference_sup").remove(),e.find(".words-wrap-outer-cover").remove(),n.append(e.contents()),t.data("imgAndRefs",{imgs:r,refs:i,oldHTML:n.html(),oldTEXT:n.text()}),n.focus(function(){$(window).data("editor-item",this);var e=$(this),t=null;e.data("selection")||(t=new Selection(document),e.data("selection",t)),t=t||e.data("selection"),t._range=null}).on("beforedeactivate",function(){var e=$(this).data("selection");e&&(e._range=e.getRange())}).on("paste",pasteFilterHandler).on("blur",function(){$(window).data("editor-item",null)}).on("keydown keyup",function(e){if(e.which===13)return!1}),n}var e=$("#mod-top-box"),t=e.find(".edit-content-box"),i=e.data("config"),s=i.relatedItems;if(!s)return;t.empty();var u=s.list[s.curIndex],a=u.prev(),f=u.next(),l,c,h=$("<p/>"),p=!1;c="";while(a[0]){l=n(a),c=l.text()+c,p=!0;if(c.length>50)break;a=a.prev()}c.length>50&&(c="\u2026\u2026"+c.slice(-50)),h.append(c),p&&t.append(h),h=$("<p/>"),p=!1,c="";while(f[0]){l=n(f),c+=l.text(),p=!0;if(c.length>50)break;f=f.next()}c.length>50&&(c=c.substring(0,50)+"\u2026\u2026"),h.append(c);var d=o(u);t.append(d),r(),p&&t.append(h)}function s(e){e.find("h3").each(function(){var e=$(this),t=$.trim(e.find(".title").text());e.empty().text(t)}),e.find("script").remove(),e.find(".h3_content, h2_content").each(function(){var e=$(this);e.replaceWith(e.contents())}),e.find("a.reference_sup").each(function(){var e=$(this),t,n=$.trim(e.attr("name"));if(n){n=(n.match(/-(\d+)$/)||[])[1];if(n)return t=document.createElement("img"),t.setAttribute("src","http://p3.qhimg.com/d/inn/7751ced4/quot.png"),t.setAttribute("id","ref"+n),t.setAttribute("data-type","ref"),t.setAttribute("data-refid",n),t.className="reference",e.replaceWith(t),!0}e.remove()}),e.find("a.show_img, a.showvideobox").each(function(){var e=$(this),t=e.find("img"),n,r,i=t.data("src")||t.attr("src"),s,o;i&&(n=document.createElement("img"),e.hasClass("layoutright")?(n.setAttribute("layout",1),n.style.cssText="float:right;"):e.hasClass("layoutleft")?(n.setAttribute("layout",3),n.style.cssText="float:left;"):e.hasClass("layoutblockcenter")?(n.setAttribute("layout",4),n.className="fadeIn"):(n.setAttribute("layout",0),n.className="fadeIn",n.setAttribute("data_modify","true")),r=t.attr("id"),r&&(r=r.replace("_","")),n.setAttribute("id",r),n.setAttribute("src",i),e.hasClass("showvideobox")?n.setAttribute("data-type","video"):n.setAttribute("data-type","img"),o=$.trim(t.attr("alt")),n.setAttribute("title",o),n.setAttribute("alt",o),e.replaceWith(n))}),e.find(".words-outer-wrap, .split-word").each(function(){var e=$(this);e.find(".words-wrap-outer-cover").remove(),e.replaceWith(e.contents())}),e.find(".openTable").remove(),e.find(".table-box").each(function(){var e=$(this);e.replaceWith(e.contents())})}function o(){var e,t=0,n,r={},i=!1,s=!0;n=$("#ref-info-form"),n.is(":visible")?e=n:(e=$("#ref-book-form"),t=1),$.each(e.serializeArray(),function(e,t){r[t.name]=t.value,t.value&&$.trim(t.value)&&(i=!0)});var o={0:["title","url"],1:["book","author","public","page"]},u={0:["\u6587\u7ae0\u540d\u4e0d\u80fd\u4e3a\u7a7a","URL\u4e0d\u80fd\u4e3a\u7a7a"],1:["\u8457\u4f5c\u540d\u4e0d\u80fd\u4e3a\u7a7a","\u4f5c\u8005\u4e0d\u80fd\u4e3a\u7a7a","\u51fa\u7248\u793e\u4e0d\u80fd\u4e3a\u7a7a","\u5f15\u6587\u9875\u7801"]};return $.each(o[t],function(e,o){n=r[o];if(i&&!n)return Baike.Dialog.alert(u[t][e]),s=!1,!1;if(i&&o==="url"&&!/^https?:\/\/(\w+.+\w+)[\/=\w?.]*$/.test(n))return Baike.Dialog.alert("\u8bf7\u586b\u5199\u6b63\u786e\u7684URL\u5730\u5740"),s=!1,!1}),s?r:null}function u(e){var t=$("<h2/>"),n=$.trim(e.find(".title").text());return t.text(n)}function a(e){var t=$("<h3/>"),n=$.trim(e.find(".title")).text();return t.text(n)}var e=$INFO.eid,t=$INFO.sid;$(document).on("mousedown",".edit-item-btn",function(e){e.preventDefault(),e.stopPropagation()}).on("click",".edit-item-btn",function(e){e.preventDefault();var t=$(this).data("cmd");if(t)switch(t){case"bold":return textBold();case"italic":return textItalic();case"link":return hyperLink()}});var f=$("#mod-top-box .edit-content-box");f.on("updateEditableBox",i).on("focusEditor",r),$.net.post("fomCorrect",{url:"/fom/correct"}),$(document).on("click",".mod-panel-correction .edit-form-btn",function(n){n.preventDefault();var r=$(this);if(r.hasClass("edit-form-btn-cancel")){$(".mod-btn-correction").trigger("click");return}var i=r.data("lock");if(i)return;var a=$("#mod-top-box"),l=r.closest(".mod-panel-correction"),c=l.find(".mod-inner-edit-box"),h=a.data("config"),p,d,v,m,g,y,b,w;v=$.trim(c.text()),w=c.html();if(!v){Baike.Dialog.alert("\u7f16\u8f91\u7684\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\uff01"),r.data("lock",!1);return}if(h&&h.curItem&&h.seed&&c[0]){d="correct-item-"+h.seed++,h.curItem.attr("id",d),p=h.curItem.closest(".sonConBox"),g=p.prev("h2");if(g[0]&&p[0]){var E=$("<div/>");y=f.data("imgAndRefs");if(w===y.oldHTML){Baike.Dialog.alert("\u60a8\u8fd8\u6ca1\u6709\u4fee\u6539\u5185\u5bb9"),r.data("lock",!1);return}b=o();if(null===b){r.data("lock",!1);return}m=p.clone(),c=c.clone(),y&&(c.prepend(y.imgs),c.append(y.refs));var S={},x;b.url?(x={},x.name=b.title,x.url=b.url,x.rid=+(new Date),x.site="",x.date=""):b.book&&(x={},x.address="",x.author=b.author,x.name=b.book,x.pagination=b.page,x.press=b["public"],x.rid=+(new Date),x.year="");if(x){S["ref"+x.rid]=x;var T;T=document.createElement("img"),T.setAttribute("src","http://p3.qhimg.com/d/inn/7751ced4/quot.png"),T.setAttribute("id","ref"+x.rid),T.setAttribute("data-type","ref"),T.setAttribute("data-refid",x.rid),T.className="reference",c.append(T)}m.find("#"+d).empty().append(c.contents()).removeAttr("id"),E.append(u(g)),E.append(m.contents()),s(E),r.data("lock",!0),$.post("/fom/correct",{eid:e,sid:t,secid:h.titleInfo.cid,editor_data:E.html(),error_data:y.oldTEXT,corrector_data:v,reference_data:JSON.stringify(S)},function(e){if(e)if(e.errno===0){$("#ref-info-form input").val(""),$("#ref-book-form input").val("");var t=$(".mod-btn-correction");t.hasClass("mod-btn-correction")&&t.trigger("click"),Baike.Dialog.alert(e.msg),monitor.log({cId:"feimu-submit-ss",c:"feimu-submit-ss"},"click")}else monitor.log({cId:"feimu-nopermission",c:"feimu-nopermission"},"click"),e.errno===100001?(monitor.log({cId:"feimu-login",c:"feimu-login"},"click"),Baike.Dialog.alert(e.msg,"",{ok:function(){QHPass.signIn(function(){monitor.log({cId:"feimu-loginSuccess",c:"feimu-loginSuccess"},"click"),QHPass.getBKUserInfo()})},okVal:"\u767b\u5f55",cancel:!0})):Baike.Dialog.alert(e.msg,"",{okVal:"\u53cd\u9988",ok:function(){monitor.log({cId:"feimu-dialogFeedback",c:"feimu-dialogFeedback"},"click"),$("#feedback-btn").trigger("click")},cancel:!0})},"json").always(function(){r.data("lock",!1)})}else Baike.Dialog.alert("\u63d0\u4ea4\u5931\u8d25\uff01")}else"console"in window&&console.error("\u7f16\u8f91\u63d0\u4ea4\u5931\u8d25\uff0c\u7f3a\u5c11\u5fc5\u8981\u53c2\u6570")})}),$(function(){function f(e){try{monitor.log(e,"click")}catch(t){}}function l(){function f(t){if(t>145){if($(".mod-btn-correction").hasClass("mod-top-btn-focus")||pt.isWordsLock)return!1;if(pt.curItem){var n;pt.curItem[0]?d(pt.curItem)||(n=v(),e.trigger("setCurItem",n)):(n=v(),n&&e.trigger("setCurItem",n))}else e.trigger("setCurItem",null)}}function l(){var t=r.scrollTop(),n=r.scrollLeft(),i,s;n>0?(s=r.width()+n,e.css({left:-n+"px",width:s+"px"})):n===0&&e.css({left:0,width:"100%"});var o=pt.scrollTimerId;null===o&&e.trigger("setCurItem",null),o&&clearTimeout(o),pt.scrollTimerId=setTimeout(function(){f(t)},1e3),t>145?(e.show(),e.hasClass("top-box-anim-top")||setTimeout(function(){e.addClass("top-box-anim-top"),e.trigger("show")},0)):(e.trigger("hide"),e.removeClass("top-box-anim-top").hide())}function c(){var e=pt.curItem;pt.isWordsLock?(a.correct&&$(".mod-btn-correction").addClass("mod-top-btn-active"),a.vote&&$(".mod-btn-agree, .mod-btn-divergence").addClass("mod-top-btn-active")):$(".mod-btn-correction, .mod-btn-agree, .mod-btn-divergence").removeClass("mod-top-btn-active"),e&&e[0]?(a.correct&&($(".mod-btn-correction").removeClass("mod-top-btn-disable "),$(".mod-btn-correction").hasClass("mod-top-btn-focus")&&($(".mod-btn-agree").addClass("mod-top-btn-disable"),$(".mod-btn-divergence").addClass("mod-top-btn-disable"))),a.vote&&!$(".mod-btn-correction").hasClass("mod-top-btn-focus")&&($(".mod-btn-agree").removeClass("mod-top-btn-disable"),$(".mod-btn-divergence").removeClass("mod-top-btn-disable"))):($(".mod-btn-correction").addClass("mod-top-btn-disable"),$(".mod-btn-agree").addClass("mod-top-btn-disable"),$(".mod-btn-divergence").addClass("mod-top-btn-disable"))}function h(t){if(t||!n.hasClass("mod-btn-state-on"))n.addClass("mod-btn-state-on").find("span").text("\u6536\u8d77").end().closest(".inner-box").next(".inner-panel").show(),s&&clearTimeout(s),s=setTimeout(function(){e.find(".inner-panel").addClass("top-box-anim-panel")},10)}function p(t){if(t||n.hasClass("mod-btn-state-on"))n.removeClass("mod-btn-state-on").find("span").text("\u5c55\u5f00").end().closest(".inner-box").next(".inner-panel").removeClass("top-box-anim-panel"),s&&clearTimeout(s),s=setTimeout(function(){e.find(".inner-panel").hide()},500)}function d(e){var t=$(window),n=t.height(),r=$(".inner-panel-content").height()+42,i=e[0].getBoundingClientRect(),s=i.top-r,o=e.height();return s>0&&s<n-r?!0:s<0&&s+o>20?!0:!1}function v(){function u(e){var t,i=!1,s,o,u,a,f;return e.find(".words-outer-wrap").each(function(){a=$(this),f=$.trim(U(a).text());if(!f)return!0;t=this.getBoundingClientRect(),o=t.top-n,u=a.height();if(o>0&&o<r-n)return i=!0,s=a,!1;if(o<0&&o+u>20)return i=!0,s=a,!1}),s}var e=$(".sonConBox"),t=$(window),n=$(".inner-panel-content").height()+42,r=t.height(),i=null,s=!1,o=t.scrollTop();return e.each(function(){var e=$(this),t,s=e.offset().top,a=e.height(),f;t=s-o-n;if(t>0&&t<r-n){f=u(e);if(f)return i=f,!1}else if(t<0&&t+a>0){f=u(e);if(f)return i=f,!1}}),i}function m(e){var t=document.createElement("pre"),n=document.createTextNode(e);return t.appendChild(n),t.innerHTML}function g(e,t,n){var r=$("<div/>"),i=$("<em/>");return i.text(t),r.text(e),r.append(i),r.append(document.createTextNode(n)),r.html()}function y(e){return $.md5(o+"_"+u+"_"+e)}function b(e){return $("<div/>").append(e).html()}function j(e){var t=y(e),n=$.net.connect("getClauseFom",{eid:o,sid:u,clause_id:t});return{sxhr:n,result:n.then(function(t){var n=[];if(t&&t.errno===0&&t.data){var r=t.data.vote_clause,i,s=!0;r&&r.options&&r.options[1].num?n.push(b($.tmpl(x,{text:e,count:r.options[1].num}))):t.data.vote_history&&(s=!1,n.push(b($.tmpl(_,{text:e})))),r&&r.options&&r.options[2].num&&n.push(b($.tmpl(T,{text:e,count:r.options[2].num}))),r=t.data.vote_history,$.isArray(r)&&$.each(r,function(t,r){r.vote_opid==="1"?i=N:i=C,n.push(b($.tmpl(i,{text:e,author:r.author,level:r.level})))}),r=t.data.correct_history&&t.data.correct_history.cur,$.isArray(r)&&$.each(r,function(e,t){n.push(b($.tmpl(k,{text:t.new_text,author:t.author,level:t.level})))}),r=t.data.correct_history&&t.data.correct_history.history,$.isArray(r)&&$.each(r,function(e,t){n.push(b($.tmpl(k,{text:t.new_text,author:t.author,level:t.level})))}),n.length&&s&&n.unshift(b($.tmpl(D,{text:e})))}return n})}}function F(){var e=$("#sideCatalog-catalog dl").clone(),t=$(".mod-menu-detail");t.append(e),t.mCustomScrollbar("destroy"),t.mCustomScrollbar({autoDraggerLength:!1,advanced:{updateOnContentResize:!0,autoExpandHorizontalScroll:!0},theme:"dark"}),$(document).click(function(e){var t=e.target,n=$(t).closest(".mod-menu-box"),r=$(".mod-menu-item");!n[0]&&r.hasClass("menu-item-focus")&&r.trigger("click")})}function I(e){e&&$(".mod-menu-detail").find("dd").each(function(t){var n=$(this);n.attr("data-anchor")===e&&(n.addClass("higthlight").siblings().removeClass("higthlight"),n.nextAll().find(".dot").removeClass("green_dot"),n.prevAll().find(".dot").addClass("green_dot"),$(".mod-menu-detail").mCustomScrollbar("scrollTo",22*t))})}function q(e,t){var n=$(".mod-menu-item");if(!$.trim(e)){n.hide();return}n.show().find("span").text(e),I(t)}function R(e,t){return Math.ceil(Math.random()*(t-e))+e}function U(e){return e=e.clone(),e.find("ul").remove(),e.find("table").remove(),e.find("a").each(function(){$.trim(this.className)&&$(this).remove()}),e}function z(){var t=e.find(".edit-content-box");t.trigger("updateEditableBox"),setTimeout(function(){t.trigger("focusEditor")},0)}function W(t){function i(e,t){var n=$("<span/>"),r;return e.length>20&&(r=e.slice(0,6),r+="\u2026\u2026",r+=e.slice(-6),e=r),n.addClass("words-list-item").text(e).data("index",t+""),n}var n=$(document.createDocumentFragment()),r;if(!t){e.find(".words-inner-list").empty();return}pt.isWordsLock?$(".words-list-tips").show():$(".words-list-tips").hide();var s,o,u,a="";$.each(t.textList,function(e,o){e-1===t.curIndex&&(o=a+o),s=t.list[e].next(".split-word"),s[0]&&(e!==t.curIndex?o+=s.text():a=s.text()),r=i(o,e),e===t.curIndex&&r.addClass("list-item-focus"),pt.isWordsLock?e===t.curIndex&&(r.css("margin-left","128px"),n.append(r)):n.append(r)}),e.find(".words-inner-list").empty().append(n)}function X(e){var t=e.prev(),n;while(t[0]){if(t.hasClass(i)&&(n=$.trim(U(t).text())))return{text:n,$dom:t};t=t.prev()}return null}function V(e){var t=e.next(),n;while(t[0]){if(t.hasClass(i)&&(n=$.trim(U(t).text())))return{text:n,$dom:t};t=t.next()}return null}function J(e){var t=X(e),n,r,s,o;if(!t){t=e.parent();while(t[0]){n=t.prev();if(n[0]){r=n;while(r[0]){s=r.find("."+i+":last");if(s[0])return o=$.trim(U(s).text()),o?{text:o,$dom:s}:J(s);r=r.prev()}}t=t.parent()}return null}return t}function K(e){var t=V(e),n,r,s,o;if(!t){t=e.parent();while(t[0]){n=t.next();if(n[0]){r=n;while(r[0]){s=r.find("."+i+":first");if(s[0])return o=$.trim(U(s).text()),o?{text:o,$dom:s}:K(s);r=r.next()}}t=t.parent()}return null}return t}function Q(e){if(!e)return{curIndex:-1,list:[],textList:[]};var t=[],n=[],r,s=i,o=-1,u=0,a;return r=J(e),r&&(t.push(r.$dom),n.push(r.text),o++),t.push(e),n.push($.trim(U(e).text())),o++,r=K(e),r&&(t.push(r.$dom),n.push(r.text),r=K(r.$dom),r&&(t.push(r.$dom),n.push(r.text))),{curIndex:o,list:t,textList:n}}function Y(e){var t=e,n=t.closest(".h3_content, .h2_content"),r=n.prev(),i,s,o,u,a,f,l,c,h={h2:1,h3:1};r.length||(r=t.closest(".sonConBox").prev());while(r[0]&&!h[r[0].tagName.toLowerCase()])r=r.prev();if(r[0]&&r[0].tagName.toLowerCase()==="h2")i=r;else{i=t.closest(".sonConBox").prev();while(i[0]&&i[0].tagName.toLowerCase()!=="h2")i=i.prev()}return s=i.find("a.edit"),o=$.trim(s.attr("href")),o&&(f=o.match(/secid=(\d+)$/),f&&f[1]&&(u=f[1])),c=e.closest("p, .h3_content, .h2_content, .sonConBox"),l=$.trim(r.find("a[name]").attr("name")),a=$.trim(r.find(".title").text()),{title:a,cid:u,url:o,anchor:l,wrapper:c}}function Z(t){var n=t.offset().top,r=n-e.find(".inner-panel-content").height()-82;Baike.Tool.scrollTo(r)}function et(){var e=document.createElement("div").style,t=!0,n=!1,r=function(){var t="webkitT,t,msT,MozT,OT".split(","),n,r=0,i=t.length;for(;r<i;r++){n=t[r]+"ransform";if(n in e)return t[r].substr(0,t[r].length-1)}return!1}(),i=r?"-"+r.toLowerCase()+"-":"";return!i&&!("transform"in e)&&(t=!1),t&&(n=function(){var e=document.createElement("p"),t,n;return document.body.insertBefore(e,null),n=i+"transform",e.style[n]!=undefined&&(e.style[n]="translate3d(1px, 1px, 1px)",t=window.getComputedStyle(e).getPropertyValue(n)),document.body.removeChild(e),t!==undefined&&t.length>0&&t!=="none"}()),{hasT:t,has3D:n,cssPrefix:i}}function tt(e){if(!(this instanceof tt))return new tt(e);this.$dom=$("<span/>"),this.$dom.html(e).addClass("bullets-fly-item"),this._left=0,this._top=0}function nt(e){if(!(this instanceof nt))return new nt;this.step=1,this.margin=20,this.during=1e4,this.$ele=e,this.list=[],this.inList=[],this.cur=0,this._stop=!0,this._top=0,this.$ele.data("bulletsfly",this)}function rt(e){function t(){}return"create"in Object?Object.create(e):(t.prototype=e,new t)}function it(e,t){var n=rt(t.prototype);n.constructor=e,e.prototype=n}function st(e){nt.call(this,e),this._cssTopList=[10,48,86],this._cssTopIndex=0,this._itemArray=[[],[],[]],this.during=16e3}function ot(){var t=pt.nextItemLock;if(t)return;pt.nextItemLock=!0;var n=pt.relatedItems,r;pt.isWordsLock?(r=pt.curItem,e.trigger("setCurItem",[r,!1,!0,!0])):(n=pt.relatedItems,r=n.list[n.curIndex+1],e.trigger("setCurItem",[r,!1,!0]))}function dt(){return $.getJSON("/fom/checkCorrectConflict",{eid:o,sid:u})}function vt(){var e=$(".mod-panel-feedback");e.show().siblings().hide(),e.find("#edit-mod-btn").hide()}function gt(e){Baike.Dialog.alert(e,"",{ok:function(){QHPass.signIn(function(){monitor.log({cId:"feimu-loginSuccess",c:"feimu-loginSuccess"},"click"),QHPass.getBKUserInfo()})},okVal:"\u767b\u5f55",cancel:!0})}function yt(e){e=e||"";var t=0;for(var n=0;n<e.length;n++)e.charCodeAt(n)>127||e.charCodeAt(n)==94?t+=2:t++;return t}t=e.data("status");if(t!=="completed"){"console"in window&&console.log("error 0;");return}$("body").addClass("entry_content_main"),$.net.get("getDefaultFom",{url:"/fom/getDfFom",lock:!1});var w="${author}(lv${level})<em>\u521b\u5efa</em>\u4e86\u672c\u8bcd\u6761",E="${author}(lv${level})<em>\u5b8c\u5584</em>\u672c\u8bcd\u6761\u81f3<em>\u7cbe\u534e\u8bcd\u6761</em>",S="{{each(i, item) list}}${item.author}(lv${item.level}){{if (i !== list.length - 1)}}\u3001{{/if}}{{/each}}<em>\u5b8c\u5584</em>\u4e86\u672c\u8bcd\u6761",x="\u201c{{if text.length > 15}}${text.substring(0, 6)}\u2026\u2026${text.slice(-6)}{{else}}${text}{{/if}}\u201d\u88ab<em>\u8d5e</em>\u4e86${count}\u6b21",T="\u201c{{if text.length > 15}}${text.substring(0, 6)}\u2026\u2026${text.slice(-6)}{{else}}${text}{{/if}}\u201d\u88ab<em>\u8e29</em>\u4e86${count}\u6b21",N="${author}(lv${level})\u4e3a\u201c{{if text.length > 15}}${text.substring(0, 6)}\u2026\u2026${text.slice(-6)}{{else}}${text}{{/if}}\u201d\u70b9\u4e86<em>\u8d5e</em>",C="${author}(lv${level})<em>\u8e29</em>\u4e86\u201c{{if text.length > 15}}${text.substring(0, 6)}\u2026\u2026${text.slice(-6)}{{else}}${text}{{/if}}\u201d\u4e00\u4e0b",k="${author}(lv${level})\u5c06\u672c\u5185\u5bb9\u4fee\u6539\u4e3a\u201c{{if text.length > 15}}${text.substring(0, 6)}\u2026\u2026${text.slice(-6)}{{else}}${text}{{/if}}\u201d",L='<p style="color:#333;font-weight:800;">${author || "\u4e00\u540d\u6e38\u5ba2"}<em>\u8d5e</em>\u4e86\u201c{{if text.length > 15}}${text.substring(0, 6)}\u2026\u2026${text.slice(-6)}{{else}}${text}{{/if}}\u201d</p>',A='<p style="color:#333;font-weight:800;">${author || "\u4e00\u540d\u6e38\u5ba2"}<em>\u8e29</em>\u4e86\u201c{{if text.length > 15}}${text.substring(0, 6)}\u2026\u2026${text.slice(-6)}{{else}}${text}{{/if}}\u201d</p>',O="\u201c${entry_name}\u201d\u88ab<em>\u8d5e</em>\u4e86${count}\u6b21",M="\u201c${entry_name}\u201d\u88ab<em>\u8e29</em>\u4e86${count}\u6b21",_='<p style="color:#333;font-weight:800;">\u201c{{if text.length > 15}}${text.substring(0, 6)}\u2026\u2026${text.slice(-6)}{{else}}${text}{{/if}}\u201d\u5c45\u7136\u8fd8\u6ca1\u6709\u4eba\u70b9\u8d5e\uff0c\u7b2c\u4e00\u6b21\u7684\u673a\u4f1a\u8fd8\u4e0d\u5feb\u628a\u63e1</p>',D='<p style="color:#333;font-weight:800;">\u4ee5\u4e0b\u5185\u5bb9\u4e0e\u201c{{if text.length > 15}}${text.substring(0, 6)}\u2026\u2026${text.slice(-6)}{{else}}${text}{{/if}}\u201d\u76f8\u5173\uff1a</p>',P='<a href="${url}" target="_blank">${text}</a>',H="${text}",B=function(){var e=$.net.connect("getDefaultFom",{eid:o,sid:u}),t=e.then(function(e){var t=[];if(e&&e.errno===0&&e.data){var n=null;$.each(["entry_creator","entry_elite","entry_top","vote_entry","entry_messages"],function(r,i){n=e.data[i],n&&($.isArray(n)?i==="entry_messages"?$.each(n,function(e,n){var r=$.trim(n.url||"");r?t.push(b($.tmpl(P,{text:n.message,url:r}))):t.push(b($.tmpl(H,{text:n.message})))}):t.push(b($.tmpl(S,{list:n}))):i==="entry_elite"?t.push(b($.tmpl(E,n))):i==="entry_creator"?t.push(b($.tmpl(w,n))):(n[1]&&t.push(b($.tmpl(O,{entry_name:$INFO.ename,count:n[1]}))),n[2]&&t.push(b($.tmpl(M,{entry_name:$INFO.ename,count:n[2]})))))})}return t});return B=function(){return{sxhr:e,result:t}},B()};$.net.get("getClauseFom",{url:"/fom/getClauseFom",lock:!1});var G=function(e){var t=$("<div/>").addClass("left-inner-highlight-bar top-box-anim"),n=$("#lemma-main"),r;t.append($("<em/>")).hide(),n.append(t),G=function(e){r=n.offset().top;if(e&&e[0]){var i=e.offset().top,s=e.height();t.show().css({top:i-r+"px",height:s+"px"})}else t.css({height:0}).hide()},G(e)};tt.prototype={move:function(e,t){this.$dom.data("x",e),this.$dom.data("y",t),this.$dom.css(this.getCSS(e,t))},getPosition:function(){return{x:this.$dom.data("x"),y:this.$dom.data("y")}},getWidth:function(){var e=this._width,t=$("#top-widthfix-room"),n=$(this.$dom.clone());return e||(t.append(n),e=this._width=n.width(),t.empty()),e},getCSS:function(e,t){var n=et();return n.hasT?n.has3D?this.getCSS=function(e,t){var r={};return r[n.cssPrefix+"transform"]="translate3d("+e+"px,"+t+"px,"+"0)",r}:this.getCSS=function(e,t){var r={};return r[n.cssPrefix+"transform"]="translate("+e+"px,"+t+"px)",r}:this.getCSS=function(e,t){return{left:e+"px",top:t+"px"}},this.getCSS(e,t)},destroy:function(){this.$dom.remove(),this.$dom=null}},nt.prototype={start:function(){function r(){e._stop||(this._tid=requestAnimationFrame(r));var i,s,o,u=new Date,a=n*(u-e._lastTime);e._lastTime=+u;for(var f=0;i=e.inList[f];f++)s=i.getPosition(),o=s.x-a,i.move(o,e._top),o+i.getWidth()<=0&&(e.inList.splice(f,1),i.destroy(),f--);i=e.inList[e.inList.length-1],s=i&&i.getPosition();if(!i||i.getWidth()+s.x+e.margin<=t)e.list.length?(i=new tt(e.list.shift()),i.move(t,e._top),e.inList.push(i),e.$ele.append(i.$dom)):i?e.$ele.trigger("queueempty",[e]):(e.$ele.trigger("noitemshow",[e]),e.stop())}if(this._tid)return;if(!this.$ele.is(":visible"))return;var e=this,t=this.$ele.width(),n=t/this.during;return this._lastTime=+(new Date),this._stop=!1,this._tid=requestAnimationFrame(r),this},stop:function(){return this.$ele.trigger("beforestop",[this]),this._stop=!0,cancelAnimationFrame(this._tid),this._tid=null,this.$ele.trigger("afterstop",[this]),this},isStop:function(){return this._stop},isShow:function(){return this.inList.length>0},clean:function(){return this.stop(),this.$ele.html(""),this},setList:function(e){return this.list=e,this},append:function(e){var t,n,r,i=(t=this.inList.length)&&this.inList[t-1];return i?n=i.getPosition().x+i.getWidth()+this.margin:n=this.$ele.width(),r=new tt(e),r.move(n,this._top),this.inList.push(r),this.$ele.append(r.$dom),this}},it(st,nt),st.prototype.append=function(e){var t=R(0,2),n=this._itemArray[t],r=n[n.length-1],i,s;return r?i=r.getPosition().x+r.getWidth()+this.margin:i=this.$ele.width(),s=new tt(e),s._top=this._cssTopList[t],s.move(i,s._top),this.inList.push(s),n.push(s),this.$ele.append(s.$dom),this},st.prototype.remove=function(e){var t=!1,n,r=-1,i=-1;return $.each(this._itemArray,function(n){$.each(this,function(n){if(this===e)return t=!0,i=n,!1});if(t)return r=n,!1}),n=this._itemArray[r],n?n.splice(i,1):null},st.prototype.start=function(){function r(){e._stop||(e._tid=requestAnimationFrame(r));var i,s,o,u,a,f=+(new Date),l=!1,c=n*(f-e._lastTime);e._lastTime=f;for(var h=0;i=e.inList[h];h++)o=i.getPosition(),u=o.x-c,i.move(u,i._top),u+i.getWidth()<=0&&(e.inList.splice(h,1),e.remove(i),i.destroy(),h--);return $.each(e._itemArray,function(n){i=this[this.length-1],s=i,l=null,o=i&&i.getPosition(),a=i&&i.getWidth()+o.x+e.margin;if(!i||a<=t)if(e.list.length){i&&(l=i),i=new tt(e.list.shift()),i._top=e._cssTopList[n],l?u=l.getWidth()+o.x+e.margin:u=t/2;if(!this.length||a>e.margin)u+=R(0,80);i.move(u,i._top),e.inList.push(i),this.push(i),e.$ele.append(i.$dom)}}),e.list.length||e.$ele.trigger("queueempty",[e]),e.inList.length||(e.$ele.trigger("noitemshow",[e]),e.stop()),this}if(this._tid)return;if(!this.$ele.is(":visible"))return;var e=this,t=this.$ele.width(),n=t/this.during;this._lastTime=+(new Date),this._stop=!1,this._tid=requestAnimationFrame
(r)};var ut=$(".voice-list"),at=ut.find(".voice-inner-list");at.on("noitemshow",function(e,t){}).on("queueempty",function(){ot()}),ut.on("show",function(e){var t=e.target;t===this&&($(this).show().data("status","show"),at.data("bulletsfly").start())}).on("hide",function(e){var t=e.target;t===this&&(at.data("bulletsfly").stop(),$(this).hide().data("status","hide"))});var ft=new nt(at),lt=new st($(".hotline-multi"));window.MulBox=lt,B(),$(".hotline-multi").on("queueempty",function(){ot()}),$(".mod-menu-item").click(function(){var e=$(this),t=e.data("tid"),n=$(".mod-menu-detail");t&&clearTimeout(t),e.hasClass("menu-item-focus")?(e.removeClass("menu-item-focus"),n.removeClass("mod-menu-detail-anim"),t=setTimeout(function(){n.hide()},500)):(e.addClass("menu-item-focus"),n.show(),t=setTimeout(function(){n.addClass("mod-menu-detail-anim")},0)),e.data("tid",t)});var ct=$(".words-list"),ht=ct.find(".words-inner-list");ct.on("show",function(e){var t=e.target;t===this&&$(this).show()}).on("hide",function(e){var t=e.target;this===t&&$(this).hide()}).on("click",".words-list-item",function(){var e=$(this),t,n=e.data("index");$.isNumeric(n)&&(t=pt.relatedItems.list[n],t&&(Z(t),n!=pt.relatedItems.curIndex&&t.trigger("click")))}),n.click(function(t,n){var r=$(this),i=$(".mod-btn-correction");t.preventDefault();if(i.hasClass("mod-top-btn-focus"))return i.trigger("click");if(r.hasClass("mod-btn-state-on"))ut.trigger("show"),ct.trigger("hide"),lt.stop(),p(!0),pt.isWordsLock=!1,c(),e.trigger("afterHide");else{h(!0),ut.trigger("hide"),ct.trigger("show"),$(".mod-btn-correction").hasClass("mod-top-btn-focus")||$(".mod-panel-hotline").show(),lt.start();var s=pt.curItem;s&&s[0]&&Z(s),c(),W(pt.relatedItems),e.trigger("afterShow")}});var pt={seed:+(new Date),isFirst:!0,scrollTimerId:null};e.data("config",pt),e.on("setCurItem",function(e,t,n,r,i){var s=$(this),o=null,u;pt.isWordsLock=i,r||(pt.nextItemLock=!0),t?(t=$(t),pt.curItem&&pt.curItem.removeClass("words-outer-wrap-focus"),pt.sxhr&&pt.sxhr.abort(),pt.curItem=t,n&&Z(t),t.addClass("words-outer-wrap-focus"),pt.relatedItems=Q(t),u=j(pt.relatedItems.textList[pt.relatedItems.curIndex]),pt.sxhr=u.sxhr,u.result.then(function(e){e.length<10?(u=B(),pt.sxhr=u.sxhr,u.result.then(function(t){ft.setList(e.concat(t)).start(),lt.setList(e.concat(t)).start(),pt.nextItemLock=!1})):(ft.setList(e.slice(0)).start(),lt.setList(e.slice(0)).start(),pt.nextItemLock=!1)}),o=Y(t),pt.titleInfo=o,W(pt.relatedItems),z(),c(),G(o.wrapper),q(o.title,o.anchor)):(pt.curItem&&pt.curItem.removeClass("words-outer-wrap-focus"),pt.curItem=$(),pt.relatedItems=Q(),B().result.then(function(e){ft.setList(e.slice(0)).start(),lt.setList(e.slice(0)).start(),pt.nextItemLock=!1}),G(),W(),c(),q())}).on("show",function(e){var t=e.target;t===this&&(ft.start(),lt.start())}).on("hide",function(e){var t=e.target;t===this&&(ft.stop(),lt.stop())}),$(".edit-ref-tab").on("click","li",function(){var e=$(this),t=e.data("ref");e.addClass("edit-ref-focus").siblings().removeClass("edit-ref-focus"),$(t).show().siblings("form").hide()});var mt=null;$(".mod-btn-correction").click(function(e){var t=$(this),r=t.data("lock");if(r===!0)return;if(t.hasClass("mod-top-btn-disable"))return;if(!pt.curItem)return;t.data("lock",!0),e.preventDefault(),t.hasClass("mod-top-btn-focus")?(t.removeClass("mod-top-btn-focus"),$("#edit-form-title").hide(),$("#edit-feedback-title").hide(),$(".mod-panel-correction, .mod-panel-feedback").hide(),n.trigger("click",!0),t.find("span").hide(),lt.start(),ft.start(),c(),t.data("lock",!1)):(null===mt&&(mt=dt()),mt.then(function(e){e&&e.errno===0?($("#edit-form-title").show(),t.addClass("mod-top-btn-focus"),lt.stop(),ut.trigger("hide"),$(".mod-panel-correction").show().siblings().hide(),$("#edit-mod-btn").show(),z(),t.find("span").show(),ct.trigger("show"),h(),setTimeout(function(){$(".words-inner-list>.list-item-focus").trigger("click")},20),c()):(monitor.log({cId:"feimu-permission",c:"feimu-permission"},"click"),$("#edit-form-title").show(),$("#edit-feedback-title").show(),t.addClass("mod-top-btn-focus"),lt.stop(),ut.trigger("hide"),ct.trigger("show"),z(),t.find("span").show(),h(),setTimeout(function(){$(".words-inner-list>.list-item-focus").trigger("click")},0),c(),vt(),Baike.Dialog.alert(e.msg,"",{ok:!1,cancel:!0}))}).always(function(){t.data("lock",!1)}))}),e.on("click",".mod-btn-agree",function(e){e.preventDefault();var t=$(this),n=t.data("tid");if($(this).hasClass("mod-top-btn-disable"))return;if(!pt.curItem)return;n&&(clearTimeout(n),t.find("em").removeClass("mod-btn-agree-anim"));var r=pt.relatedItems.textList[pt.relatedItems.curIndex],i=y(r);$.get("/fom/vote",{eid:o,sid:u,vote_qid:i,vote_opid:1},function(e){if(e)if(e.errno===0){t.find("em").addClass("mod-btn-agree-anim"),t.data("tid",setTimeout(function(){t.find("em").removeClass("mod-btn-agree-anim")},1e3));var n=b($.tmpl(L,{author:e.data.author,text:r}));ft.append(n).start(),lt.append(n).start()}else e.errno===100026?(monitor.log({cId:"feimu-login",c:"feimu-login"},"click"),gt(e.msg)):Baike.Dialog.alert(e.msg)},"json")}),e.on("click",".mod-btn-divergence",function(e){e.preventDefault();var t=$(this),n=t.data("tid");if($(this).hasClass("mod-top-btn-disable"))return;if(!pt.curItem)return;n&&(clearTimeout(n),t.find("em").removeClass("mod-btn-divergence-anim"));var r=pt.relatedItems.textList[pt.relatedItems.curIndex],i=y(r);$.get("/fom/vote",{eid:o,sid:u,vote_qid:i,vote_opid:2},function(e){if(e)if(e.errno===0){t.find("em").addClass("mod-btn-divergence-anim"),t.data("tid",setTimeout(function(){t.data("tid",null),t.find("em").removeClass("mod-btn-divergence-anim")},1e3));var n=b($.tmpl(A,{author:e.data.author,text:r}));ft.append(n).start(),lt.append(n).start()}else e.errno===100026?(monitor.log({cId:"feimu-login",c:"feimu-login"},"click"),gt(e.msg)):Baike.Dialog.alert(e.msg)},"json")}),$(".feedback-type-box").on("click","label",function(e){e.preventDefault();var t=$(this),n=t.parent("span");n.find("input").trigger("click")}),$("#feedback-form").on("click",".edit-form-btn",function(e){var t=$(this);if(t.hasClass("edit-form-btn-cancel")){$("#edit-mod-btn").trigger("click"),$(".mod-panel-correction .edit-form-btn-cancel").trigger("click");return}var n=pt.curItem;if(!n||!n[0])return;var r=t.data("lock");if(r)return;t.data("lock",!0);var i=pt.relatedItems.textList[pt.relatedItems.curIndex],s=$("#feedback-form"),a=s.find('input[name="feedtype"]:checked').val(),f=$.trim(s.find('textarea[name="content"]').val());if(!a){Baike.Dialog.alert("\u8bf7\u60a8\u9009\u62e9\u53cd\u9988\u7c7b\u578b\uff01"),t.data("lock",!1);return}if(!f){Baike.Dialog.alert("\u8bf7\u60a8\u5199\u70b9\u4ec0\u4e48\u63d0\u4ea4\u7ed9\u6211\u4eec\u5427\uff01"),t.data("lock",!1);return}var l=yt(f);if(l<10){Baike.Dialog.alert("\u8bf7\u60a8\u5199\u70b9\u4ec0\u4e48\u63d0\u4ea4\u7ed9\u6211\u4eec\u5427\uff01"),t.data("lock",!1);return}if(l>1600){t.data("lock",!1),$INFO.chost==="so.com"?Baike.Dialog.alert("\u60a8\u63d0\u4ea4\u4e86\u8fd9\u4e48\u591a\u53cd\u9988\u4fe1\u606f\uff0c\u7cfb\u7edf\u88c5\u4e0d\u4e0b\u4e86\uff0c\u7ed9\u6211\u4eec\u53d1\u90ae\u4ef6\u5427\uff0c360baike@360.cn"):Baike.Dialog.alert("\u60a8\u63d0\u4ea4\u4e86\u8fd9\u4e48\u591a\u53cd\u9988\u4fe1\u606f\uff0c\u7cfb\u7edf\u88c5\u4e0d\u4e0b\u4e86\uff0c\u7ed9\u6211\u4eec\u53d1\u90ae\u4ef6\u5427\uff0chaosoubaike@360.cn");return}$.post("/fom/feedback",{eid:o,sid:u,type:a,reason:f,clause:i},function(e){if(e)if(e.errno===0){var t=$(".mod-btn-correction");t.hasClass("mod-btn-correction")&&t.trigger("click"),$('#feedback-form input[name="feedtype"]:first').attr("checked",!0),$("#feedback-form textarea").val(""),Baike.Dialog.alert(e.msg)}else e.errno===100001?(monitor.log({cId:"feimu-login",c:"feimu-login"},"click"),gt(e.msg)):Baike.Dialog.alert(e.msg)},"json").always(function(){t.data("lock",!1)})}),$("#feedback-btn").click(function(e){e.preventDefault(),$("#edit-feedback-title").show(),$(".mod-panel-correction").hide(),$(".mod-panel-feedback").show()}),$("#edit-mod-btn").click(function(e){e.preventDefault(),$("#edit-feedback-title").hide(),$(".mod-panel-correction").show(),$(".mod-panel-feedback").hide()}),F(),l(),r.scroll(l),$("#mod-top-box form input,#mod-top-box textarea").placeholder({customClass:"mod-placeholder"})}var e=$("#mod-top-box"),t,n=$(".mod-btn-trigger"),r=$(window),i=Splitter.WORDS_WRAP_CLASSNAME,s,o=$INFO.eid,u=$INFO.sid,a={correct:0,vote:0};Baike.Info.entryStateDefer.then(function(e){if(e.errno===0){var t;(t=e.data.fom_switch)&&$.each(["fom","correct","vote"],function(e,n){if(e===0&&(t[n]|0)===0)return!1;e===0?(Baike.WordSpliter.split(),l(),f({cid:"feimu-show",c:"feimu-show"})):a[n]=t[n]|0})}})}),function(e,t,n,r){e.switchable={Config:{panels:".panels > *",initIndex:0,effect:"none",loop:!1,onBeforeSwitch:null,onSwitch:null},Effects:{none:function(e,t){var n=this,r=n.panels;r.slice(e,e+1).hide(),r.slice(t,t+1).show()}},Plugins:[]};var i=function(n,r){var i=this,s=e(this),o="beforeSwitch",u="switch";e.extend(i,{_initPlugins:function(){var t=e.switchable.Plugins,n=t.length,r=0;for(;r<n;r++)e.isFunction(t[r].init)&&t[r].init(i)},_warn:function(e){t.console&&t.console.warn&&console.warn(e)},_init:function(){i.root=n,i.config=r;var t=e(n),a;if(t[0]._switchable)return;if(!t.find(r.panels).length){i._warn("No panel in switchable");return}i.panels=t.find(r.panels),i.length=i.panels.length;if(i.length<1){i._warn("No panel group in switchable");return}return e.isFunction(r.onBeforeSwitch)&&s.on(o,r.onBeforeSwitch),e.isFunction(r.onSwitch)&&s.on(u,r.onSwitch),i.index=(r.initIndex%i.length+i.length)%i.length,i._nextIndex=i.index,a=i.panels.slice(i.index,i.index+1),r.effect.toLowerCase()==="none"&&(i.panels.not(a).hide(),a.show()),t[0]._switchable=this,!0},_switchPanels:function(t,n){if(n===t)return;r.effect=r.effect.toLowerCase();if(!r.effect||!e.switchable.Effects[r.effect]){i._warn("No switch effect");return}e.switchable.Effects[r.effect].call(i,t,n)},switchTo:function(t){t%=i.length;if(t===i.index)return i;i._nextIndex=t;var n=e.Event(o);s.trigger(n,[t]);if(n.isDefaultPrevented())return;return i._switchPanels(i.index,t),i.index=t,n.type=u,s.trigger(n,[t]),i},willTo:function(){return i._nextIndex},destroy:function(){i._destroyPlugins(),i._destroy()},_destroyPlugins:function(){var t=e.switchable.Plugins,n=t.length,r=0;for(;r<n;r++)e.isFunction(t[r].destroy)&&t[r].destroy(i)},_destroy:function(){var t;delete e(n)[0]._switchable;for(t in i)delete i[t]}});if(!i._init())return e(n)[0]._switchable;i._initPlugins()};e.fn.switchable=function(t){var n=e(this),r=n.length,s=[],o;t=e.extend({},e.switchable.Config,t);for(o=0;o<r;o++)s[o]=new i(n.eq(o),t);return s[0]}}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.extend(e.switchable.Config,{duration:500,easing:"ease"}),e.switchable.Animate=function(t,n,s,o,u){var a=this,f={},l,c;e.switchable.Transition===r&&(e.switchable.Transition=i()),l=e.switchable.Transition,e.extend(a,{isAnimated:!1,run:function(){if(a.isAnimated)return;var r,i=[];for(r in n)i.push(r);if(l)f[l+"Property"]=i.join(", ")||"all",f[l+"Duration"]=s+"ms",f[l+"TimingFunction"]=o,t.css(e.extend(n,f)),c=setTimeout(function(){a._clearCss(),a._complete()},s);else{var u=/cubic-bezier\(([\s\d.,]+)\)/,h=o.match(u),p=e.switchable.TimingFn[o];if(p||h)o=e.switchable.Easing(h?h[1]:p.match(u)[1]);t.animate(n,s,o,function(){a._complete()})}return a.isAnimated=!0,a},stop:function(e){if(!a.isAnimated)return;return l?(clearTimeout(c),c=r,e&&(a._clearCss(),a._complete())):t.stop(!1,e),a.isAnimated=!1,a},_complete:function(){e.isFunction(u)&&u()},_clearCss:function(){f[l+"Property"]="none",t.css(f)}}),a.run()};var i=function(){var e=n.documentElement,t=["Webkit","Moz"],i="transition",s="",o;if(e.style[i]!==r)s=i;else for(o=0;o<2;o++)if(e.style[i=t[o]+"Transition"]!==r){s=i;break}return s}}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;var i=function(e){return"cubic-bezier("+e+")"},s=function(e){var t=[],n=101,r;for(r=0;r<=n;r++)t[r]=e.call(null,r/n);return function(e){if(e===1)return t[n];var r=n*e,i=Math.floor(r),s=t[i],o=t[i+1];return s+(o-s)*(r-i)}},o=function(e,t,n,r,i,s){function h(e){return((o*e+u)*e+a)*e}function p(e){return((f*e+l)*e+c)*e}function d(e){return(3*o*e+2*u)*e+a}function v(e){return 1/(200*e)}function m(e,t){return p(g(e,t))}function g(e,t){function a(e){return e>=0?e:0-e}var n,r,i,s,o,u;for(i=e,u=0;u<8;u++){s=h(i)-e;if(a(s)<t)return i;o=d(i);if(a(o)<1e-6)break;i-=s/o}n=0,r=1,i=e;if(i<n)return n;if(i>r)return r;while(n<r){s=h(i);if(a(s-e)<t)return i;e>s?n=i:r=i,i=(r-n)*.5+n}return i}var o,u,a,f,l,c;return o=u=a=f=l=c=0,a=3*t,u=3*(r-t)-a,o=1-a-u,c=3*n,l=3*(i-n)-c,f=1-c-l,m(e,v(s))};e.switchable.TimingFn={ease:i(".25, .1, .25, 1"),linear:i("0, 0, 1, 1"),"ease-in":i(".42, 0, 1, 1"),"ease-out":i("0, 0, .58, 1"),"ease-in-out":i(".42, 0, .58, 1")},e.switchable.Easing=function(n){var r,u,a=0,f;n=n.split(","),u=n.length;for(;a<u;a++)n[a]=parseFloat(n[a]);return u!==4?t.console&&console.warn(i(n.join(", "))+" missing argument."):(r="cubic-bezier-"+n.join("-"),e.easing[r]||(f=s(function(e){return o(e,n[0],n[1],n[2],n[3],5)}),e.easing[r]=function(e){return f.call(null,e)})),r}}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.switchable.Effects.fade=function(t,n){var i=this,s=i.config,o=i.panels,u=o.slice(t,t+1),a=o.slice(n,n+1),f=function(){a.css({opacity:1})},l=function(){a.css({zIndex:i.length}),u.css({zIndex:1}),i._anim=r};i._anim&&i._anim.stop(!0),f(),i._anim=new e.switchable.Animate(u,{opacity:0},s.duration,s.easing,l)},e.switchable.Plugins.push({name:"fade effect",init:function(e){var t=e.config,n=e.panels,r=e.index,i=n.slice(r,r+1);t.effect.toLowerCase()==="fade"&&(n.css({position:"absolute",top:0,left:0}),n.not(i).css({opacity:0,zIndex:1}),i.css({opacity:1,zIndex:e.length}))},destroy:function(e){e._anim&&e._anim.stop(!0)}})}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;var i="position",s="absolute",o="relative";e.extend(e.switchable.Config,{horiz:!0}),e.switchable.Effects.scroll=function(t,n){var i=this,s=i.config,o=i._data,u=t===0&&n===o.max,a=(u||t===o.max&&n===0)&&i._circle,f={},l=function(){f[o.prop]=a?i._adjustPosition(u):-o.size*n},c=function(){a&&i._resetPosition(u),i._anim=r};i._anim&&i._anim.stop(!0),setTimeout(function(){l(),i._anim=new e.switchable.Animate(o.wrap,f,s.duration,s.easing,c)},0)},e.switchable.Plugins.push({name:"scroll effect",init:function(t){var n=t.config,u=t.panels,a=u.eq(0).outerWidth(!0),f=u.eq(0).outerHeight(!0),l={},c=t._data={wrap:u.parent(),max:t.length-1,prop:n.horiz?"left":"top",size:n.horiz?a:f};if(n.effect.toLowerCase()!=="scroll")return;n.loop,t.root.css(i)==="static"&&t.root.css(i,o),l[i]=s,l[c.prop]=-c.size*t.index,c.wrap.css(l).css("width",n.horiz?a*t.length:a),t.isHoriz=n.horiz,e.extend(t,{_adjustPosition:function(e){var n=e?c.max:0;return l[i]=o,l[c.prop]=(e?-1:1)*c.size*t.length,u.slice(n,n+1).css(l),e?c.size:-c.size*t.length},_resetPosition:function(e){var t=e?c.max:0;l[i]="",l[c.prop]="",u.slice(t,t+1).css(l),l[i]=r,l[c.prop]=e?-c.size*c.max:0,c.wrap.css(l)}})},destroy:function(e){e._anim&&e._anim.stop(!0)}})}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.extend(e.switchable.Config,{autoplay:!1,interval:3e3,pauseOnHover:!0,isBackward:!1}),e.switchable.Plugins.push({name:"autoplay",init:function(t){var n=t.config,i=!1,s,o,u,a=function(){u=t.willTo();if(u===!1){t._cancelTimers();return}u===0&&!n.isBackward||u===t.length-1&&n.isBackward?t._circle=!0:t._circle=!1,l(r,u),t.switchTo(t._nextIndex)},f=function(){var e=n.duration||0;o=setInterval(function(){a()},n.interval+e)},l=function(e,r){if(!n.loop&&n.isBackward&&t.index===0)return;if(!n.loop&&!n.isBackward&&t.index===t.length-1)return;var i=1;n.isBackward&&(i=-1),t._nextIndex=(r+i+t.length)%t.length,t._circle=!0};if(!n.autoplay||t.length<=1)return;n.pauseOnHover&&t.panels.on("mouseenter.switchAutoplay",function(){t._pause()}).on("mouseleave.switchAutoplay",function(){i||t._play()}),e(t).on("switch",l),e.extend(t,{_play:function(){t._cancelTimers(),t.paused=!1,s=setTimeout(function(){a(),f()},n.interval)},_pause:function(){t._cancelTimers(),t.paused=!0},_cancelTimers:function(){s&&(clearTimeout(s),s=r),o&&(clearInterval(o),o=r)},play:function(){return t._play(),i=!1,t},pause:function(){return t._pause(),i=!0,t}}),t._play()},destroy:function(e){if(!e.config.autoplay||e.length<=1)return;e._pause(),e.panels.off(".switchAutoplay")}})}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.extend(e.switchable.Config,{triggers:".trigger a",currentTrigger:"active",triggerType:"hover",delay:100}),e.switchable.Plugins.push({name:"trigger",init:function(t){var n=t.config,i=e(t.root),s,o,u=i.find(n.triggers).length;if(!u)return;while(u<t.length)i.find(n.triggers).slice(0,1).clone().insertAfter(i.find(n.triggers).last()),u=i.find(n.triggers).length;t.triggers=i.find(n.triggers).slice(0,t.length),t.triggers.removeClass(n.currentTrigger).eq(t.index).addClass(n.currentTrigger),t.triggers.on("click.switchTrigger",function(n){n.preventDefault(),s=e(this).index(),t._cancelDelayTimer(),t.switchTo(s)}),n.triggerType==="hover"&&t.triggers.on("mouseenter.switchTrigger",function(){s=e(this).index(),t._delayTimer=setTimeout(function(){t.switchTo(s)},n.delay)}).on("mouseleave.switchTrigger",function(){t._cancelDelayTimer()}),e(t).on("switch",function(e,n){t._switchTrigger(n)}),n.autoplay&&n.pauseOnHover&&t.triggers.on("mouseenter.switchTrigger",function(){o=t.paused,t._pause()}).on("mouseleave.switchTrigger",function(){o||t._play()}),e.extend(t,{_cancelDelayTimer:function(){t._delayTimer&&(clearTimeout(t._delayTimer),t._delayTimer=r)},_switchTrigger:function(e){t.triggers.removeClass(n.currentTrigger).eq(e).addClass(n.currentTrigger)}})},destroy:function(t){e(t.root).find(t.config.triggers).length&&(t.triggers.off("click.switchTrigger"),t.triggers.off(".switchTrigger"))}})}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.extend(e.switchable.Config,{prev:".prev",next:".next",disabledClass:"disabled",respondinAnimating:!0}),e.switchable.Plugins.push({name:"carousel",init:function(t){var n=t.config,r=["prev","next"],i,s,o=0,u,a,f=function(e,r){if(!n.loop&&r&&e===0)return;if(!n.loop&&!r&&e===t.length-1)return;var i=1;r&&(i=-1),t._nextIndex=(e+i+t.length)%t.length};if(!e(t.root).find(n.prev).length&&!e(t.root).find(n.next).length)return;for(;o<2;o++){i=r[o],s=e(t.root).find(n[i]);if(!s.length)continue;t[i+"Btn"]=s}e(t.root).find(n.prev).on("click.switchCarousel",function(r){r.preventDefault();if(!e(this).hasClass(n.disabledClass)){if(t._anim){if(!n.respondinAnimating)return;t._anim.stop(!0)}f(t.index,!0),u=t.willTo(),u===t.length-1?t._circle=!0:t._circle=!1,t.switchTo(u)}}),e(t.root).find(n.next).on("click.switchCarousel",function(r){r.preventDefault();if(!e(this).hasClass(n.disabledClass)){if(t._anim){if(!n.respondinAnimating)return;t._anim.stop(!0)}f(t.index,!1),u=t.willTo(),u===0?t._circle=!0:t._circle=!1,t.switchTo(u)}}),n.autoplay&&n.pauseOnHover&&e(t.root).find(n.prev+", "+n.next).on("mouseenter.switchCarousel",function(){a=t.paused,t._pause()}).on("mouseleave.switchCarousel",function(){a||t._play()}),e(t).on("switch",function(){t.nextBtn&&(t.nextBtn.removeClass(n.disabledClass),!n.loop&&t.index===t.length-1&&t.nextBtn.addClass(n.disabledClass)),t.prevBtn&&(t.prevBtn.removeClass(n.disabledClass),!n.loop&&t.index===0&&t.prevBtn.addClass(n.disabledClass)),t._circle=!1})},destroy:function(t){e(t.root).find(t.config.prev).length&&e(t.root).find(t.config.prev).off(".switchCarousel"),e(t.root).find(t.config.next).length&&e(t.root).find(t.config.next).off(".switchCarousel")}})}(jQuery,window,document),function(e,t,n,r){if(!e.switchable)return;e.extend(e.switchable.Config,{indexOffset:1,numFormat:"[index]/[length]",switchNum:".switch-num"}),e.switchable.Plugins.push({name:"switchnum",init:function(t){var n=t.config,r=function(e,t){var r=n.numFormat.replace(/\[index\]/ig,"<span>"+(e+n.indexOffset)+"</span>");return r.replace(/\[length\]/ig,t)};if(!n.switchNum&&e(t.root).find(n.switchNum).length)return;e(t.root).find(n.switchNum).html(r(n.initIndex,t.length)),e(t).on("switch",function(){e(t.root).find(n.switchNum).html(r(t.index,t.length))})}})}(jQuery,window,document),function(e,t,n,r){e.extend(e.switchable.Config,{lazyloadCls:"switchlazyload"}),e.switchable.Plugins.push({name:"lazyload",init:function(t){var n=t.config.lazyloadCls,r=function(t){if(t.hasClass(n)){var r=e.trim(t.val());return t.replaceWith(r),!0}return!1};e(t).on("beforeSwitch",function(){e(t.panels).each(function(t,i){r(e(i))||r(e(i).find("."+n))})})}})}(jQuery,window,document),function(e){e(".j-switchable").each(function(t,n){var r=e(n).data("switch")||{},i=e(n).switchable(r);e.extend(n,{switchable:i})})}(jQuery),$(function(){$.net.get("getIndexContribute","/cms/json/zt/doc_right.json"),$.net.connect("getIndexContribute",function(e){$.getTmpl("/resource/other/template/doc_right_slide.html").done(function(){$("#js-doc-rightslide").html($("#js-t-doc-rightslide").tmpl(e)).show(),$(".doc-rightslide").switchable({panels:".items li",initIndex:0,index:1,loop:!0,effect:"scroll",autoplay:!0,triggers:".menus a",triggerType:"click",currentTrigger:"active",pauseOnHover:!0,interval:5e3,onSwitch:function(e,t){$("#js-rightslide-items a").removeClass("active").eq(t).addClass("active")}})})})}),$(function(){function e(e){var t={1:"liveplay",2:"replay"},n={sn:e.sn,type:t[e.type],createTime:e.publishtime},r={menu:"false",bgcolor:"#000000",wmode:"window",allowScriptAccess:"always",allowFullScreen:!0},i={id:"js-huajiao-player",name:"js-huajiao-player"};swfobject.embedSWF("http://s2.qhimg.com/static/0c19fd79c0f24a1f/player.swf","js-huajiao-player","100%","500","6.0.0","http://s1.qhimg.com/static/db3e04bd6db0bbba.swf",n,r,i)}$.net.get("getDocHuajiao","/cms/json/huajiao/feed.json"),$.net.connect("getDocHuajiao",function(t){$.getTmpl("/resource/other/template/doc_huajiao.html").done(function(){$.getScript("http://static.huajiao.com/huajiao/web/static/module/swfobject-2.3.js",function(){if(t&&t[Baike.Info.sid]&&t[Baike.Info.sid].open==1){$(".js-huajiao").html($("#js-t-huajiao").tmpl(t[Baike.Info.sid])).show(),e(t[Baike.Info.sid]);var n={cId:"huajiao-show",c:"huajiao-show"};monitor.log(n,"click")}})})})});